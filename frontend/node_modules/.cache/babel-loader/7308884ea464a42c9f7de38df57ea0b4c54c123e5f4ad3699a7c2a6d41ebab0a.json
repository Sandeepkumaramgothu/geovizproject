{"ast":null,"code":"var _jsxFileName = \"/Users/girishkumarpatchikoru/Desktop/projecthci/geovizproject/frontend/src/components/MapView.js\",\n  _s = $RefreshSig$();\n// src/components/MapView.js\n\nimport React, { useEffect, useState, useCallback } from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport Papa from 'papaparse';\nimport { Bar, Pie, Doughnut, PolarArea } from 'react-chartjs-2';\nimport { Chart as ChartJS, RadialLinearScale, CategoryScale, LinearScale, BarElement, ArcElement, Title, Tooltip, Legend } from 'chart.js';\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\nimport { CircularProgressbar } from 'react-circular-progressbar';\nimport 'react-circular-progressbar/dist/styles.css';\nimport styles from './styles'; // Ensure this file exists and is properly configured\nimport preprocessData from './preprocessData'; // Ensure this file exists and is properly configured\nimport { MAPBOX_TOKEN } from './constants'; // Ensure this file exists and contains your Mapbox token\nimport blueMarkerIcon from '../assets/images/custom-marker-blue.png'; // Ensure these assets exist\nimport redMarkerIcon from '../assets/images/custom-marker-red.png';\nimport './marker.css'; // Ensure this CSS file exists for marker styling\n\n// Register Chart.js components\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(RadialLinearScale, CategoryScale, LinearScale, BarElement, ArcElement, Title, Tooltip, Legend, ChartDataLabels);\n\n// Set Mapbox access token\nmapboxgl.accessToken = MAPBOX_TOKEN;\nconst MapView = () => {\n  _s();\n  // State Variables\n  const [map, setMap] = useState(null);\n  const [geoData, setGeoData] = useState([]);\n  const [numericHeaders, setNumericHeaders] = useState([]);\n  const [stringHeaders, setStringHeaders] = useState([]);\n  const [selectedLocation, setSelectedLocation] = useState(null);\n  const [chartType, setChartType] = useState('Bar');\n  const [chartData, setChartData] = useState(null);\n  const [totalRows, setTotalRows] = useState(0);\n  const [totalColumns, setTotalColumns] = useState(0);\n  const [markers, setMarkers] = useState([]);\n  const [progress, setProgress] = useState({\n    upload: 0,\n    preprocess: 0,\n    geocode: 0\n  });\n  const [progressMessages, setProgressMessages] = useState({\n    upload: '',\n    preprocess: '',\n    geocode: ''\n  });\n  const [cityList, setCityList] = useState([]);\n  const [selectedCity1, setSelectedCity1] = useState('');\n  const [selectedCity2, setSelectedCity2] = useState('');\n  const [locationColumn, setLocationColumn] = useState('');\n  const [markersAdded, setMarkersAdded] = useState(false);\n\n  // Initialize Map\n  useEffect(() => {\n    const initializeMap = new mapboxgl.Map({\n      container: 'map',\n      // HTML container id\n      style: 'mapbox://styles/mapbox/streets-v11',\n      // style URL\n      center: [-98.5795, 39.8283],\n      // starting position [lng, lat] (center of USA)\n      zoom: 3 // starting zoom\n    });\n\n    // Add navigation control (the +/- zoom buttons)\n    const nav = new mapboxgl.NavigationControl();\n    initializeMap.addControl(nav, 'top-right');\n    setMap(initializeMap);\n\n    // Clean up on unmount\n    return () => initializeMap.remove();\n  }, []);\n\n  // Preprocess Data Function\n  const handlePreprocess = useCallback(async rawData => {\n    // Determine the location column dynamically\n    const possibleLocationColumns = ['LocationDesc', 'LocationAbbr', 'state', 'State', 'city', 'City', 'Country', 'Country Name', 'Country Code', 'Address', 'Place', 'GeoLocation'\n    // Include more possible location columns if necessary\n    ];\n    let detectedLocationColumn = possibleLocationColumns.find(col => rawData[0] && rawData[0].hasOwnProperty(col));\n\n    // If no location column is found, use 'locationID'\n    if (!detectedLocationColumn) {\n      detectedLocationColumn = 'locationID';\n    }\n    setLocationColumn(detectedLocationColumn);\n    console.log('Detected Location Column:', detectedLocationColumn);\n\n    // Preprocess data\n    const processedData = await preprocessData(rawData, setProgress, detectedLocationColumn);\n    if (!processedData || processedData.length === 0) {\n      alert('No valid data after preprocessing.');\n      return;\n    }\n    setGeoData(processedData);\n\n    // Identify numeric and string headers\n    if (processedData.length > 0) {\n      const headers = Object.keys(processedData[0]);\n      const numeric = [];\n      const strings = [];\n      headers.forEach(header => {\n        if (['latitude', 'longitude', 'GeoLocation', 'locationID'].includes(header)) return;\n        const isNumeric = processedData.every(item => {\n          const value = parseFloat(item[header]);\n          return !isNaN(value);\n        });\n        if (isNumeric) {\n          numeric.push(header);\n        } else {\n          strings.push(header);\n        }\n      });\n      setNumericHeaders(numeric);\n      setStringHeaders(strings);\n      setTotalRows(processedData.length);\n      setTotalColumns(headers.length);\n\n      // Extract unique locations for comparison\n      const uniqueLocations = [...new Set(processedData.map(item => item[detectedLocationColumn]).filter(Boolean))];\n      setCityList(uniqueLocations);\n    } else {\n      alert('No data available after filtering.');\n    }\n\n    // Reset markersAdded state when new data is uploaded\n    setMarkersAdded(false);\n  }, []);\n\n  // Generate a human-readable label for the location\n  const getLocationLabel = useCallback(data => {\n    if (data[locationColumn]) return data[locationColumn];\n    if (data.city) return data.city;\n    if (data.state) return data.state;\n    if (data.address) return data.address;\n    return `Lat: ${parseFloat(data.latitude).toFixed(2)}, Lng: ${parseFloat(data.longitude).toFixed(2)}`;\n  }, [locationColumn]);\n\n  // Handle File Upload\n  const handleFileUpload = event => {\n    setProgress({\n      upload: 0,\n      preprocess: 0,\n      geocode: 0\n    });\n    setProgressMessages({\n      upload: '',\n      preprocess: '',\n      geocode: ''\n    });\n    const file = event.target.files[0];\n    if (file) {\n      const fileExtension = file.name.split('.').pop().toLowerCase();\n      if (fileExtension === 'json') {\n        const reader = new FileReader();\n        reader.onload = async e => {\n          try {\n            const data = JSON.parse(e.target.result);\n            setProgress(prev => ({\n              ...prev,\n              upload: 100\n            }));\n            setProgressMessages(prev => ({\n              ...prev,\n              upload: 'Dataset uploaded successfully.'\n            }));\n            await handlePreprocess(data);\n          } catch (error) {\n            console.error('Invalid JSON format:', error);\n            alert('Error: Uploaded file is not valid JSON.');\n          }\n        };\n        reader.readAsText(file);\n      } else if (fileExtension === 'csv') {\n        Papa.parse(file, {\n          header: true,\n          skipEmptyLines: true,\n          beforeFirstChunk: chunk => {\n            // Handle datasets with metadata rows\n            const lines = chunk.trim().split('\\n');\n            const dataStartIndex = lines.findIndex(line => line.startsWith('Country Name') || line.startsWith('state') || line.startsWith('RowId'));\n            if (dataStartIndex > 0) {\n              return lines.slice(dataStartIndex).join('\\n');\n            }\n            return chunk;\n          },\n          complete: async results => {\n            setProgress(prev => ({\n              ...prev,\n              upload: 100\n            }));\n            setProgressMessages(prev => ({\n              ...prev,\n              upload: 'Dataset uploaded successfully.'\n            }));\n            await handlePreprocess(results.data);\n          },\n          error: error => {\n            console.error('CSV parsing error:', error);\n            alert('Error: Failed to parse CSV file.');\n          }\n        });\n      } else {\n        alert('Please upload a valid JSON or CSV file.');\n      }\n    }\n  };\n\n  // Monitor Progress Updates\n  useEffect(() => {\n    if (progress.preprocess === 100) {\n      setProgressMessages(prev => ({\n        ...prev,\n        preprocess: 'Preprocessing completed.'\n      }));\n    }\n  }, [progress.preprocess]);\n  useEffect(() => {\n    if (progress.geocode === 100) {\n      setProgressMessages(prev => ({\n        ...prev,\n        geocode: 'Locations marked on the map.'\n      }));\n    }\n  }, [progress.geocode]);\n\n  // Handle Location Selection from Map\n  const handleLocationSelect = useCallback(locationData => {\n    console.log('Marker clicked:', locationData); // Debugging statement\n    // Clear city selections if a map marker is selected\n    setSelectedCity1('');\n    setSelectedCity2('');\n    if (selectedLocation && selectedLocation.locationID === locationData.locationID) {\n      setSelectedLocation(null); // Deselect\n      setChartData(null);\n    } else {\n      setSelectedLocation(locationData);\n      setChartData(null);\n    }\n  }, [selectedLocation]);\n\n  // Handle Location Comparison Selection\n  const handleCitySelection = () => {\n    if (selectedCity1 && selectedCity2) {\n      const data1 = geoData.filter(item => item[locationColumn] === selectedCity1);\n      const data2 = geoData.filter(item => item[locationColumn] === selectedCity2);\n      if (data1.length === 0 || data2.length === 0) {\n        alert('One or both selected locations have no data.');\n        return;\n      }\n\n      // Aggregate data (e.g., average)\n      const aggregatedData1 = {};\n      const aggregatedData2 = {};\n      numericHeaders.forEach(header => {\n        const values1 = data1.map(item => parseFloat(item[header]) || 0);\n        const values2 = data2.map(item => parseFloat(item[header]) || 0);\n        const avg1 = values1.reduce((a, b) => a + b, 0) / (values1.length || 1);\n        const avg2 = values2.reduce((a, b) => a + b, 0) / (values2.length || 1);\n        aggregatedData1[header] = avg1;\n        aggregatedData2[header] = avg2;\n      });\n\n      // Normalize data for chart display (0.5% to 10%)\n      const dataMin = 0; // Minimum data value\n      const dataMax = Math.max(...Object.values(aggregatedData1), ...Object.values(aggregatedData2));\n      const range = dataMax - dataMin || 1; // Avoid division by zero\n\n      const normalizedData1 = {};\n      const normalizedData2 = {};\n      const actualData1 = {};\n      const actualData2 = {};\n      numericHeaders.forEach(header => {\n        normalizedData1[header] = (aggregatedData1[header] - dataMin) / range * 9.5 + 0.5;\n        normalizedData2[header] = (aggregatedData2[header] - dataMin) / range * 9.5 + 0.5;\n        actualData1[header] = aggregatedData1[header];\n        actualData2[header] = aggregatedData2[header];\n      });\n\n      // Prepare chart data\n      const labels = numericHeaders;\n      const dataSet = {\n        labels,\n        datasets: [{\n          label: selectedCity1,\n          data: numericHeaders.map(header => normalizedData1[header]),\n          actualValues: numericHeaders.map(header => actualData1[header]),\n          backgroundColor: 'rgba(255, 99, 132, 0.5)',\n          borderColor: 'rgba(255, 99, 132, 1)',\n          borderWidth: 1\n        }, {\n          label: selectedCity2,\n          data: numericHeaders.map(header => normalizedData2[header]),\n          actualValues: numericHeaders.map(header => actualData2[header]),\n          backgroundColor: 'rgba(54, 162, 235, 0.5)',\n          borderColor: 'rgba(54, 162, 235, 1)',\n          borderWidth: 1\n        }]\n      };\n      setChartData(dataSet);\n      setSelectedLocation(null); // Deselect any single location\n    }\n  };\n\n  // Generate Chart Data for Selected Location\n  const generateChartData = useCallback(() => {\n    if (selectedLocation) {\n      const locationValues = numericHeaders.map(header => ({\n        label: header,\n        value: parseFloat(selectedLocation[header]) || 0\n      }));\n\n      // Normalize data for chart display (0.5% to 10%)\n      const dataMin = 0; // Minimum data value\n      const dataMax = Math.max(...locationValues.map(item => item.value));\n      const range = dataMax - dataMin || 1; // Avoid division by zero\n\n      const normalizedValues = locationValues.map(item => ({\n        label: item.label,\n        normalizedValue: (item.value - dataMin) / range * 9.5 + 0.5,\n        actualValue: item.value // Keep the actual value\n      }));\n      setChartData({\n        labels: normalizedValues.map(item => item.label),\n        datasets: [{\n          label: getLocationLabel(selectedLocation),\n          data: normalizedValues.map(item => item.normalizedValue),\n          actualValues: normalizedValues.map(item => item.actualValue),\n          // Store actual values\n          backgroundColor: ['rgba(255, 99, 132, 0.5)', 'rgba(54, 162, 235, 0.5)', 'rgba(255, 206, 86, 0.5)', 'rgba(75, 192, 192, 0.5)', 'rgba(153, 102, 255, 0.5)', 'rgba(255, 159, 64, 0.5)'],\n          borderColor: ['rgba(255, 99, 132, 1)', 'rgba(54, 162, 235, 1)', 'rgba(255, 206, 86, 1)', 'rgba(75, 192, 192, 1)', 'rgba(153, 102, 255, 1)', 'rgba(255, 159, 64, 1)'],\n          borderWidth: 1\n        }]\n      });\n    }\n  }, [selectedLocation, numericHeaders, getLocationLabel]);\n\n  // Data Generation\n  useEffect(() => {\n    generateChartData();\n  }, [generateChartData, chartType]);\n\n  // Markers on Map\n  const renderMarkers = useCallback(() => {\n    if (map && geoData.length > 0) {\n      // Remove existing markers\n      markers.forEach(marker => marker.remove());\n      const newMarkers = [];\n      geoData.forEach(data => {\n        const latitude = parseFloat(data.latitude);\n        const longitude = parseFloat(data.longitude);\n        if (!isNaN(latitude) && !isNaN(longitude)) {\n          const el = document.createElement('div');\n          el.className = 'marker';\n          const isSelected = selectedLocation ? selectedLocation.locationID === data.locationID : false;\n          const icon = isSelected ? redMarkerIcon : blueMarkerIcon;\n          el.style.backgroundImage = `url(${icon})`;\n          el.style.width = '30px';\n          el.style.height = '30px';\n          el.style.backgroundSize = 'contain';\n          el.style.cursor = 'pointer';\n          const marker = new mapboxgl.Marker(el).setLngLat([longitude, latitude]).addTo(map);\n          marker.getElement().addEventListener('click', () => {\n            handleLocationSelect(data);\n          });\n          newMarkers.push(marker);\n        }\n      });\n      setMarkers(newMarkers);\n      setMarkersAdded(true);\n      setProgress(prev => ({\n        ...prev,\n        geocode: 100\n      }));\n      setProgressMessages(prev => ({\n        ...prev,\n        geocode: 'Locations marked on the map.'\n      }));\n    }\n  }, [map, geoData, selectedLocation, handleLocationSelect]);\n\n  // Re-render markers when selectedLocation changes to update marker colors\n  useEffect(() => {\n    if (markersAdded) {\n      renderMarkers();\n    }\n  }, [selectedLocation, renderMarkers, markersAdded]);\n\n  // Chart Options\n  const chartOptions = {\n    responsive: true,\n    maintainAspectRatio: false,\n    scales: chartType === 'Bar' ? {\n      y: {\n        beginAtZero: true,\n        min: 0.5,\n        max: 10\n      }\n    } : {},\n    plugins: {\n      legend: {\n        position: 'top'\n      },\n      datalabels: {\n        display: true,\n        color: '#000',\n        align: 'center',\n        // Align labels to the center of the bars\n        anchor: 'center',\n        formatter: function (value, context) {\n          const dataset = context.chart.data.datasets[context.datasetIndex];\n          if (dataset.actualValues) {\n            const actualValue = dataset.actualValues[context.dataIndex];\n            return actualValue.toFixed(2); // Display actual value\n          } else {\n            return value.toFixed(2);\n          }\n        }\n      },\n      tooltip: {\n        callbacks: {\n          label: function (context) {\n            const dataset = context.dataset;\n            if (dataset.actualValues) {\n              const actualValue = dataset.actualValues[context.dataIndex];\n              return `${context.label}: ${actualValue.toFixed(2)}`;\n            } else {\n              return `${context.label}: ${context.parsed.y}`;\n            }\n          }\n        }\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"map\",\n      style: styles.map\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 597,\n      columnNumber: 6\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.sidebar,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.combinedBox,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.progressContainer,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.progressItem,\n            children: [/*#__PURE__*/_jsxDEV(CircularProgressbar, {\n              value: progress.upload,\n              text: `${Math.round(progress.upload)}%`,\n              styles: {\n                root: {\n                  width: '80px'\n                },\n                text: {\n                  fontSize: '10px'\n                }\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 607,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.progressMessage,\n              children: progressMessages.upload\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 615,\n              columnNumber: 14\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 606,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.progressItem,\n            children: [/*#__PURE__*/_jsxDEV(CircularProgressbar, {\n              value: progress.preprocess,\n              text: `${Math.round(progress.preprocess)}%`,\n              styles: {\n                root: {\n                  width: '80px'\n                },\n                text: {\n                  fontSize: '10px'\n                }\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 618,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.progressMessage,\n              children: progressMessages.preprocess\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 626,\n              columnNumber: 14\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 617,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.progressItem,\n            children: [/*#__PURE__*/_jsxDEV(CircularProgressbar, {\n              value: progress.geocode,\n              text: `${Math.round(progress.geocode)}%`,\n              styles: {\n                root: {\n                  width: '80px'\n                },\n                text: {\n                  fontSize: '10px'\n                }\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 629,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.progressMessage,\n              children: progressMessages.geocode\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 637,\n              columnNumber: 14\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 628,\n            columnNumber: 12\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 605,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.section,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: styles.sectionTitle,\n            children: \"Upload Data\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 644,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \".json, .csv\",\n            onChange: handleFileUpload,\n            style: styles.fileInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 645,\n            columnNumber: 12\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 643,\n          columnNumber: 10\n        }, this), geoData.length > 0 && !markersAdded && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.section,\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: renderMarkers,\n            style: {\n              ...styles.chartButton,\n              backgroundColor: '#17a2b8',\n              width: '100%'\n            },\n            children: \"Mark Locations on Map\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 657,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 656,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.section,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: styles.sectionTitle,\n            children: \"Dataset Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 673,\n            columnNumber: 12\n          }, this), geoData.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.datasetDetails,\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Rows:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 677,\n                columnNumber: 18\n              }, this), \" \", totalRows]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 676,\n              columnNumber: 16\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Columns:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 680,\n                columnNumber: 18\n              }, this), \" \", totalColumns]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 679,\n              columnNumber: 16\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Numeric Columns:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 683,\n                columnNumber: 18\n              }, this), \" \", numericHeaders.join(', ')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 682,\n              columnNumber: 16\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"String Columns:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 686,\n                columnNumber: 18\n              }, this), \" \", stringHeaders.join(', ')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 685,\n              columnNumber: 16\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 675,\n            columnNumber: 14\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No dataset uploaded yet.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 690,\n            columnNumber: 14\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 672,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.section,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: styles.sectionTitle,\n            children: \"Compare Two Locations\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 697,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.inputGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.inputLabel,\n              children: \"Location 1:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 699,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: selectedCity1,\n              onChange: e => setSelectedCity1(e.target.value),\n              style: styles.selectDropdown,\n              disabled: cityList.length === 0,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select Location\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 706,\n                columnNumber: 16\n              }, this), cityList.map(city => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: city,\n                children: city\n              }, city, false, {\n                fileName: _jsxFileName,\n                lineNumber: 708,\n                columnNumber: 18\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 700,\n              columnNumber: 14\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 698,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.inputGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.inputLabel,\n              children: \"Location 2:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 715,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: selectedCity2,\n              onChange: e => setSelectedCity2(e.target.value),\n              style: styles.selectDropdown,\n              disabled: cityList.length === 0,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select Location\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 722,\n                columnNumber: 16\n              }, this), cityList.map(city => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: city,\n                children: city\n              }, city, false, {\n                fileName: _jsxFileName,\n                lineNumber: 724,\n                columnNumber: 18\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 716,\n              columnNumber: 14\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 714,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleCitySelection,\n            disabled: !selectedCity1 || !selectedCity2,\n            style: {\n              ...styles.chartButton,\n              backgroundColor: selectedCity1 && selectedCity2 ? '#28a745' : '#6c757d'\n            },\n            children: \"Compare\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 730,\n            columnNumber: 12\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 696,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.section,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: styles.sectionTitle,\n            children: \"Select Chart Type\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 746,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.chartOptions,\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setChartType('Bar'),\n              style: {\n                ...styles.chartButton,\n                ...(chartType === 'Bar' ? styles.chartButtonActive : {})\n              },\n              children: \"Bar Chart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 748,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setChartType('Pie'),\n              style: {\n                ...styles.chartButton,\n                ...(chartType === 'Pie' ? styles.chartButtonActive : {})\n              },\n              children: \"Pie Chart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 757,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setChartType('Doughnut'),\n              style: {\n                ...styles.chartButton,\n                ...(chartType === 'Doughnut' ? styles.chartButtonActive : {})\n              },\n              children: \"Doughnut Chart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 766,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setChartType('PolarArea'),\n              style: {\n                ...styles.chartButton,\n                ...(chartType === 'PolarArea' ? styles.chartButtonActive : {})\n              },\n              children: \"PolarArea Chart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 775,\n              columnNumber: 14\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 747,\n            columnNumber: 12\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 745,\n          columnNumber: 10\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 603,\n        columnNumber: 8\n      }, this), chartData && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.chartContainer,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.chartWrapper,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.chartContent,\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [chartType, \" Chart\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 794,\n              columnNumber: 16\n            }, this), chartType === 'Bar' && /*#__PURE__*/_jsxDEV(Bar, {\n              data: chartData,\n              options: chartOptions\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 795,\n              columnNumber: 40\n            }, this), chartType === 'Pie' && /*#__PURE__*/_jsxDEV(Pie, {\n              data: chartData,\n              options: chartOptions\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 796,\n              columnNumber: 40\n            }, this), chartType === 'Doughnut' && /*#__PURE__*/_jsxDEV(Doughnut, {\n              data: chartData,\n              options: chartOptions\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 798,\n              columnNumber: 18\n            }, this), chartType === 'PolarArea' && /*#__PURE__*/_jsxDEV(PolarArea, {\n              data: chartData,\n              options: chartOptions\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 801,\n              columnNumber: 18\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 793,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 792,\n          columnNumber: 12\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 791,\n        columnNumber: 10\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 601,\n      columnNumber: 6\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 595,\n    columnNumber: 4\n  }, this);\n};\n_s(MapView, \"+D1kyjK8+iYOjvEHXW3j/cE0sQs=\");\n_c = MapView;\nexport default MapView;\nvar _c;\n$RefreshReg$(_c, \"MapView\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","mapboxgl","Papa","Bar","Pie","Doughnut","PolarArea","Chart","ChartJS","RadialLinearScale","CategoryScale","LinearScale","BarElement","ArcElement","Title","Tooltip","Legend","ChartDataLabels","CircularProgressbar","styles","preprocessData","MAPBOX_TOKEN","blueMarkerIcon","redMarkerIcon","jsxDEV","_jsxDEV","register","accessToken","MapView","_s","map","setMap","geoData","setGeoData","numericHeaders","setNumericHeaders","stringHeaders","setStringHeaders","selectedLocation","setSelectedLocation","chartType","setChartType","chartData","setChartData","totalRows","setTotalRows","totalColumns","setTotalColumns","markers","setMarkers","progress","setProgress","upload","preprocess","geocode","progressMessages","setProgressMessages","cityList","setCityList","selectedCity1","setSelectedCity1","selectedCity2","setSelectedCity2","locationColumn","setLocationColumn","markersAdded","setMarkersAdded","initializeMap","Map","container","style","center","zoom","nav","NavigationControl","addControl","remove","handlePreprocess","rawData","possibleLocationColumns","detectedLocationColumn","find","col","hasOwnProperty","console","log","processedData","length","alert","headers","Object","keys","numeric","strings","forEach","header","includes","isNumeric","every","item","value","parseFloat","isNaN","push","uniqueLocations","Set","filter","Boolean","getLocationLabel","data","city","state","address","latitude","toFixed","longitude","handleFileUpload","event","file","target","files","fileExtension","name","split","pop","toLowerCase","reader","FileReader","onload","e","JSON","parse","result","prev","error","readAsText","skipEmptyLines","beforeFirstChunk","chunk","lines","trim","dataStartIndex","findIndex","line","startsWith","slice","join","complete","results","handleLocationSelect","locationData","locationID","handleCitySelection","data1","data2","aggregatedData1","aggregatedData2","values1","values2","avg1","reduce","a","b","avg2","dataMin","dataMax","Math","max","values","range","normalizedData1","normalizedData2","actualData1","actualData2","labels","dataSet","datasets","label","actualValues","backgroundColor","borderColor","borderWidth","generateChartData","locationValues","normalizedValues","normalizedValue","actualValue","renderMarkers","marker","newMarkers","el","document","createElement","className","isSelected","icon","backgroundImage","width","height","backgroundSize","cursor","Marker","setLngLat","addTo","getElement","addEventListener","chartOptions","responsive","maintainAspectRatio","scales","y","beginAtZero","min","plugins","legend","position","datalabels","display","color","align","anchor","formatter","context","dataset","chart","datasetIndex","dataIndex","tooltip","callbacks","parsed","children","id","fileName","_jsxFileName","lineNumber","columnNumber","sidebar","combinedBox","progressContainer","progressItem","text","round","root","fontSize","progressMessage","section","sectionTitle","type","accept","onChange","fileInput","onClick","chartButton","datasetDetails","inputGroup","inputLabel","selectDropdown","disabled","chartButtonActive","chartContainer","chartWrapper","chartContent","options","_c","$RefreshReg$"],"sources":["/Users/girishkumarpatchikoru/Desktop/projecthci/geovizproject/frontend/src/components/MapView.js"],"sourcesContent":["// src/components/MapView.js\r\n\r\n\r\nimport React, { useEffect, useState, useCallback } from 'react';\r\nimport mapboxgl from 'mapbox-gl';\r\nimport Papa from 'papaparse';\r\nimport { Bar, Pie, Doughnut, PolarArea } from 'react-chartjs-2';\r\nimport {\r\n Chart as ChartJS,\r\n RadialLinearScale,\r\n CategoryScale,\r\n LinearScale,\r\n BarElement,\r\n ArcElement,\r\n Title,\r\n Tooltip,\r\n Legend,\r\n} from 'chart.js';\r\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\r\nimport { CircularProgressbar } from 'react-circular-progressbar';\r\nimport 'react-circular-progressbar/dist/styles.css';\r\n\r\n\r\nimport styles from './styles'; // Ensure this file exists and is properly configured\r\nimport preprocessData from './preprocessData'; // Ensure this file exists and is properly configured\r\nimport { MAPBOX_TOKEN } from './constants'; // Ensure this file exists and contains your Mapbox token\r\nimport blueMarkerIcon from '../assets/images/custom-marker-blue.png'; // Ensure these assets exist\r\nimport redMarkerIcon from '../assets/images/custom-marker-red.png';\r\nimport './marker.css'; // Ensure this CSS file exists for marker styling\r\n\r\n\r\n// Register Chart.js components\r\nChartJS.register(\r\n RadialLinearScale,\r\n CategoryScale,\r\n LinearScale,\r\n BarElement,\r\n ArcElement,\r\n Title,\r\n Tooltip,\r\n Legend,\r\n ChartDataLabels\r\n);\r\n\r\n\r\n// Set Mapbox access token\r\nmapboxgl.accessToken = MAPBOX_TOKEN;\r\n\r\n\r\nconst MapView = () => {\r\n // State Variables\r\n const [map, setMap] = useState(null);\r\n const [geoData, setGeoData] = useState([]);\r\n const [numericHeaders, setNumericHeaders] = useState([]);\r\n const [stringHeaders, setStringHeaders] = useState([]);\r\n const [selectedLocation, setSelectedLocation] = useState(null);\r\n const [chartType, setChartType] = useState('Bar');\r\n const [chartData, setChartData] = useState(null);\r\n const [totalRows, setTotalRows] = useState(0);\r\n const [totalColumns, setTotalColumns] = useState(0);\r\n const [markers, setMarkers] = useState([]);\r\n const [progress, setProgress] = useState({\r\n   upload: 0,\r\n   preprocess: 0,\r\n   geocode: 0,\r\n });\r\n const [progressMessages, setProgressMessages] = useState({\r\n   upload: '',\r\n   preprocess: '',\r\n   geocode: '',\r\n });\r\n const [cityList, setCityList] = useState([]);\r\n const [selectedCity1, setSelectedCity1] = useState('');\r\n const [selectedCity2, setSelectedCity2] = useState('');\r\n const [locationColumn, setLocationColumn] = useState('');\r\n const [markersAdded, setMarkersAdded] = useState(false);\r\n\r\n\r\n // Initialize Map\r\n useEffect(() => {\r\n   const initializeMap = new mapboxgl.Map({\r\n     container: 'map', // HTML container id\r\n     style: 'mapbox://styles/mapbox/streets-v11', // style URL\r\n     center: [-98.5795, 39.8283], // starting position [lng, lat] (center of USA)\r\n     zoom: 3, // starting zoom\r\n   });\r\n\r\n\r\n   // Add navigation control (the +/- zoom buttons)\r\n   const nav = new mapboxgl.NavigationControl();\r\n   initializeMap.addControl(nav, 'top-right');\r\n\r\n\r\n   setMap(initializeMap);\r\n\r\n\r\n   // Clean up on unmount\r\n   return () => initializeMap.remove();\r\n }, []);\r\n\r\n\r\n // Preprocess Data Function\r\n const handlePreprocess = useCallback(\r\n   async (rawData) => {\r\n     // Determine the location column dynamically\r\n     const possibleLocationColumns = [\r\n       'LocationDesc',\r\n       'LocationAbbr',\r\n       'state',\r\n       'State',\r\n       'city',\r\n       'City',\r\n       'Country',\r\n       'Country Name',\r\n       'Country Code',\r\n       'Address',\r\n       'Place',\r\n       'GeoLocation',\r\n       // Include more possible location columns if necessary\r\n     ];\r\n     let detectedLocationColumn = possibleLocationColumns.find(\r\n       (col) => rawData[0] && rawData[0].hasOwnProperty(col)\r\n     );\r\n\r\n\r\n     // If no location column is found, use 'locationID'\r\n     if (!detectedLocationColumn) {\r\n       detectedLocationColumn = 'locationID';\r\n     }\r\n\r\n\r\n     setLocationColumn(detectedLocationColumn);\r\n     console.log('Detected Location Column:', detectedLocationColumn);\r\n\r\n\r\n     // Preprocess data\r\n     const processedData = await preprocessData(\r\n       rawData,\r\n       setProgress,\r\n       detectedLocationColumn\r\n     );\r\n\r\n\r\n     if (!processedData || processedData.length === 0) {\r\n       alert('No valid data after preprocessing.');\r\n       return;\r\n     }\r\n\r\n\r\n     setGeoData(processedData);\r\n\r\n\r\n     // Identify numeric and string headers\r\n     if (processedData.length > 0) {\r\n       const headers = Object.keys(processedData[0]);\r\n       const numeric = [];\r\n       const strings = [];\r\n\r\n\r\n       headers.forEach((header) => {\r\n         if (\r\n           ['latitude', 'longitude', 'GeoLocation', 'locationID'].includes(header)\r\n         )\r\n           return;\r\n\r\n\r\n         const isNumeric = processedData.every((item) => {\r\n           const value = parseFloat(item[header]);\r\n           return !isNaN(value);\r\n         });\r\n         if (isNumeric) {\r\n           numeric.push(header);\r\n         } else {\r\n           strings.push(header);\r\n         }\r\n       });\r\n\r\n\r\n       setNumericHeaders(numeric);\r\n       setStringHeaders(strings);\r\n\r\n\r\n       setTotalRows(processedData.length);\r\n       setTotalColumns(headers.length);\r\n\r\n\r\n       // Extract unique locations for comparison\r\n       const uniqueLocations = [\r\n         ...new Set(\r\n           processedData.map((item) => item[detectedLocationColumn]).filter(Boolean)\r\n         ),\r\n       ];\r\n       setCityList(uniqueLocations);\r\n     } else {\r\n       alert('No data available after filtering.');\r\n     }\r\n\r\n\r\n     // Reset markersAdded state when new data is uploaded\r\n     setMarkersAdded(false);\r\n   },\r\n   []\r\n );\r\n\r\n\r\n // Generate a human-readable label for the location\r\n const getLocationLabel = useCallback(\r\n   (data) => {\r\n     if (data[locationColumn]) return data[locationColumn];\r\n     if (data.city) return data.city;\r\n     if (data.state) return data.state;\r\n     if (data.address) return data.address;\r\n     return `Lat: ${parseFloat(data.latitude).toFixed(2)}, Lng: ${parseFloat(\r\n       data.longitude\r\n     ).toFixed(2)}`;\r\n   },\r\n   [locationColumn]\r\n );\r\n\r\n\r\n // Handle File Upload\r\n const handleFileUpload = (event) => {\r\n   setProgress({\r\n     upload: 0,\r\n     preprocess: 0,\r\n     geocode: 0,\r\n   });\r\n   setProgressMessages({\r\n     upload: '',\r\n     preprocess: '',\r\n     geocode: '',\r\n   });\r\n   const file = event.target.files[0];\r\n   if (file) {\r\n     const fileExtension = file.name.split('.').pop().toLowerCase();\r\n\r\n\r\n     if (fileExtension === 'json') {\r\n       const reader = new FileReader();\r\n       reader.onload = async (e) => {\r\n         try {\r\n           const data = JSON.parse(e.target.result);\r\n           setProgress((prev) => ({ ...prev, upload: 100 }));\r\n           setProgressMessages((prev) => ({\r\n             ...prev,\r\n             upload: 'Dataset uploaded successfully.',\r\n           }));\r\n           await handlePreprocess(data);\r\n         } catch (error) {\r\n           console.error('Invalid JSON format:', error);\r\n           alert('Error: Uploaded file is not valid JSON.');\r\n         }\r\n       };\r\n       reader.readAsText(file);\r\n     } else if (fileExtension === 'csv') {\r\n       Papa.parse(file, {\r\n         header: true,\r\n         skipEmptyLines: true,\r\n         beforeFirstChunk: (chunk) => {\r\n           // Handle datasets with metadata rows\r\n           const lines = chunk.trim().split('\\n');\r\n           const dataStartIndex = lines.findIndex(\r\n             (line) =>\r\n               line.startsWith('Country Name') ||\r\n               line.startsWith('state') ||\r\n               line.startsWith('RowId')\r\n           );\r\n           if (dataStartIndex > 0) {\r\n             return lines.slice(dataStartIndex).join('\\n');\r\n           }\r\n           return chunk;\r\n         },\r\n         complete: async (results) => {\r\n           setProgress((prev) => ({ ...prev, upload: 100 }));\r\n           setProgressMessages((prev) => ({\r\n             ...prev,\r\n             upload: 'Dataset uploaded successfully.',\r\n           }));\r\n           await handlePreprocess(results.data);\r\n         },\r\n         error: (error) => {\r\n           console.error('CSV parsing error:', error);\r\n           alert('Error: Failed to parse CSV file.');\r\n         },\r\n       });\r\n     } else {\r\n       alert('Please upload a valid JSON or CSV file.');\r\n     }\r\n   }\r\n };\r\n\r\n\r\n // Monitor Progress Updates\r\n useEffect(() => {\r\n   if (progress.preprocess === 100) {\r\n     setProgressMessages((prev) => ({\r\n       ...prev,\r\n       preprocess: 'Preprocessing completed.',\r\n     }));\r\n   }\r\n }, [progress.preprocess]);\r\n\r\n\r\n useEffect(() => {\r\n   if (progress.geocode === 100) {\r\n     setProgressMessages((prev) => ({\r\n       ...prev,\r\n       geocode: 'Locations marked on the map.',\r\n     }));\r\n   }\r\n }, [progress.geocode]);\r\n\r\n\r\n // Handle Location Selection from Map\r\n const handleLocationSelect = useCallback(\r\n   (locationData) => {\r\n     console.log('Marker clicked:', locationData); // Debugging statement\r\n     // Clear city selections if a map marker is selected\r\n     setSelectedCity1('');\r\n     setSelectedCity2('');\r\n     if (\r\n       selectedLocation &&\r\n       selectedLocation.locationID === locationData.locationID\r\n     ) {\r\n       setSelectedLocation(null); // Deselect\r\n       setChartData(null);\r\n     } else {\r\n       setSelectedLocation(locationData);\r\n       setChartData(null);\r\n     }\r\n   },\r\n   [selectedLocation]\r\n );\r\n\r\n\r\n // Handle Location Comparison Selection\r\n const handleCitySelection = () => {\r\n   if (selectedCity1 && selectedCity2) {\r\n     const data1 = geoData.filter((item) => item[locationColumn] === selectedCity1);\r\n     const data2 = geoData.filter((item) => item[locationColumn] === selectedCity2);\r\n\r\n\r\n     if (data1.length === 0 || data2.length === 0) {\r\n       alert('One or both selected locations have no data.');\r\n       return;\r\n     }\r\n\r\n\r\n     // Aggregate data (e.g., average)\r\n     const aggregatedData1 = {};\r\n     const aggregatedData2 = {};\r\n\r\n\r\n     numericHeaders.forEach((header) => {\r\n       const values1 = data1.map((item) => parseFloat(item[header]) || 0);\r\n       const values2 = data2.map((item) => parseFloat(item[header]) || 0);\r\n\r\n\r\n       const avg1 = values1.reduce((a, b) => a + b, 0) / (values1.length || 1);\r\n       const avg2 = values2.reduce((a, b) => a + b, 0) / (values2.length || 1);\r\n\r\n\r\n       aggregatedData1[header] = avg1;\r\n       aggregatedData2[header] = avg2;\r\n     });\r\n\r\n\r\n     // Normalize data for chart display (0.5% to 10%)\r\n     const dataMin = 0; // Minimum data value\r\n     const dataMax = Math.max(\r\n       ...Object.values(aggregatedData1),\r\n       ...Object.values(aggregatedData2)\r\n     );\r\n     const range = dataMax - dataMin || 1; // Avoid division by zero\r\n\r\n\r\n     const normalizedData1 = {};\r\n     const normalizedData2 = {};\r\n     const actualData1 = {};\r\n     const actualData2 = {};\r\n\r\n\r\n     numericHeaders.forEach((header) => {\r\n       normalizedData1[header] =\r\n         ((aggregatedData1[header] - dataMin) / range) * 9.5 + 0.5;\r\n       normalizedData2[header] =\r\n         ((aggregatedData2[header] - dataMin) / range) * 9.5 + 0.5;\r\n       actualData1[header] = aggregatedData1[header];\r\n       actualData2[header] = aggregatedData2[header];\r\n     });\r\n\r\n\r\n     // Prepare chart data\r\n     const labels = numericHeaders;\r\n     const dataSet = {\r\n       labels,\r\n       datasets: [\r\n         {\r\n           label: selectedCity1,\r\n           data: numericHeaders.map((header) => normalizedData1[header]),\r\n           actualValues: numericHeaders.map((header) => actualData1[header]),\r\n           backgroundColor: 'rgba(255, 99, 132, 0.5)',\r\n           borderColor: 'rgba(255, 99, 132, 1)',\r\n           borderWidth: 1,\r\n         },\r\n         {\r\n           label: selectedCity2,\r\n           data: numericHeaders.map((header) => normalizedData2[header]),\r\n           actualValues: numericHeaders.map((header) => actualData2[header]),\r\n           backgroundColor: 'rgba(54, 162, 235, 0.5)',\r\n           borderColor: 'rgba(54, 162, 235, 1)',\r\n           borderWidth: 1,\r\n         },\r\n       ],\r\n     };\r\n\r\n\r\n     setChartData(dataSet);\r\n     setSelectedLocation(null); // Deselect any single location\r\n   }\r\n };\r\n\r\n\r\n // Generate Chart Data for Selected Location\r\n const generateChartData = useCallback(() => {\r\n   if (selectedLocation) {\r\n     const locationValues = numericHeaders.map((header) => ({\r\n       label: header,\r\n       value: parseFloat(selectedLocation[header]) || 0,\r\n     }));\r\n\r\n\r\n     // Normalize data for chart display (0.5% to 10%)\r\n     const dataMin = 0; // Minimum data value\r\n     const dataMax = Math.max(...locationValues.map((item) => item.value));\r\n     const range = dataMax - dataMin || 1; // Avoid division by zero\r\n\r\n\r\n     const normalizedValues = locationValues.map((item) => ({\r\n       label: item.label,\r\n       normalizedValue: ((item.value - dataMin) / range) * 9.5 + 0.5,\r\n       actualValue: item.value, // Keep the actual value\r\n     }));\r\n\r\n\r\n     setChartData({\r\n       labels: normalizedValues.map((item) => item.label),\r\n       datasets: [\r\n         {\r\n           label: getLocationLabel(selectedLocation),\r\n           data: normalizedValues.map((item) => item.normalizedValue),\r\n           actualValues: normalizedValues.map((item) => item.actualValue), // Store actual values\r\n           backgroundColor: [\r\n             'rgba(255, 99, 132, 0.5)',\r\n             'rgba(54, 162, 235, 0.5)',\r\n             'rgba(255, 206, 86, 0.5)',\r\n             'rgba(75, 192, 192, 0.5)',\r\n             'rgba(153, 102, 255, 0.5)',\r\n             'rgba(255, 159, 64, 0.5)',\r\n           ],\r\n           borderColor: [\r\n             'rgba(255, 99, 132, 1)',\r\n             'rgba(54, 162, 235, 1)',\r\n             'rgba(255, 206, 86, 1)',\r\n             'rgba(75, 192, 192, 1)',\r\n             'rgba(153, 102, 255, 1)',\r\n             'rgba(255, 159, 64, 1)',\r\n           ],\r\n           borderWidth: 1,\r\n         },\r\n       ],\r\n     });\r\n   }\r\n }, [selectedLocation, numericHeaders, getLocationLabel]);\r\n\r\n\r\n // Data Generation\r\n useEffect(() => {\r\n   generateChartData();\r\n }, [generateChartData, chartType]);\r\n\r\n\r\n // Markers on Map\r\n const renderMarkers = useCallback(() => {\r\n   if (map && geoData.length > 0) {\r\n     // Remove existing markers\r\n     markers.forEach((marker) => marker.remove());\r\n     const newMarkers = [];\r\n\r\n\r\n     geoData.forEach((data) => {\r\n       const latitude = parseFloat(data.latitude);\r\n       const longitude = parseFloat(data.longitude);\r\n\r\n\r\n       if (!isNaN(latitude) && !isNaN(longitude)) {\r\n         const el = document.createElement('div');\r\n         el.className = 'marker';\r\n         const isSelected = selectedLocation\r\n           ? selectedLocation.locationID === data.locationID\r\n           : false;\r\n         const icon = isSelected ? redMarkerIcon : blueMarkerIcon;\r\n         el.style.backgroundImage = `url(${icon})`;\r\n         el.style.width = '30px';\r\n         el.style.height = '30px';\r\n         el.style.backgroundSize = 'contain';\r\n         el.style.cursor = 'pointer';\r\n\r\n\r\n         const marker = new mapboxgl.Marker(el)\r\n           .setLngLat([longitude, latitude])\r\n           .addTo(map);\r\n\r\n\r\n         marker.getElement().addEventListener('click', () => {\r\n           handleLocationSelect(data);\r\n         });\r\n\r\n\r\n         newMarkers.push(marker);\r\n       }\r\n     });\r\n     setMarkers(newMarkers);\r\n     setMarkersAdded(true);\r\n\r\n\r\n     setProgress((prev) => ({ ...prev, geocode: 100 }));\r\n     setProgressMessages((prev) => ({\r\n       ...prev,\r\n       geocode: 'Locations marked on the map.',\r\n     }));\r\n   }\r\n }, [map, geoData, selectedLocation, handleLocationSelect]);\r\n\r\n\r\n // Re-render markers when selectedLocation changes to update marker colors\r\n useEffect(() => {\r\n   if (markersAdded) {\r\n     renderMarkers();\r\n   }\r\n }, [selectedLocation, renderMarkers, markersAdded]);\r\n\r\n\r\n // Chart Options\r\n const chartOptions = {\r\n   responsive: true,\r\n   maintainAspectRatio: false,\r\n   scales:\r\n     chartType === 'Bar'\r\n       ? {\r\n           y: {\r\n             beginAtZero: true,\r\n             min: 0.5,\r\n             max: 10,\r\n           },\r\n         }\r\n       : {},\r\n   plugins: {\r\n     legend: {\r\n       position: 'top',\r\n     },\r\n     datalabels: {\r\n       display: true,\r\n       color: '#000',\r\n       align: 'center', // Align labels to the center of the bars\r\n       anchor: 'center',\r\n       formatter: function (value, context) {\r\n         const dataset = context.chart.data.datasets[context.datasetIndex];\r\n         if (dataset.actualValues) {\r\n           const actualValue = dataset.actualValues[context.dataIndex];\r\n           return actualValue.toFixed(2); // Display actual value\r\n         } else {\r\n           return value.toFixed(2);\r\n         }\r\n       },\r\n     },\r\n     tooltip: {\r\n       callbacks: {\r\n         label: function (context) {\r\n           const dataset = context.dataset;\r\n           if (dataset.actualValues) {\r\n             const actualValue = dataset.actualValues[context.dataIndex];\r\n             return `${context.label}: ${actualValue.toFixed(2)}`;\r\n           } else {\r\n             return `${context.label}: ${context.parsed.y}`;\r\n           }\r\n         },\r\n       },\r\n     },\r\n   },\r\n };\r\n\r\n\r\n return (\r\n   <div style={styles.container}>\r\n     {/* Map Container */}\r\n     <div id=\"map\" style={styles.map}></div>\r\n\r\n\r\n     {/* Sidebar */}\r\n     <div style={styles.sidebar}>\r\n       {/* Combined Controls Box */}\r\n       <div style={styles.combinedBox}>\r\n         {/* Progress Indicators */}\r\n         <div style={styles.progressContainer}>\r\n           <div style={styles.progressItem}>\r\n             <CircularProgressbar\r\n               value={progress.upload}\r\n               text={`${Math.round(progress.upload)}%`}\r\n               styles={{\r\n                 root: { width: '80px' },\r\n                 text: { fontSize: '10px' },\r\n               }}\r\n             />\r\n             <div style={styles.progressMessage}>{progressMessages.upload}</div>\r\n           </div>\r\n           <div style={styles.progressItem}>\r\n             <CircularProgressbar\r\n               value={progress.preprocess}\r\n               text={`${Math.round(progress.preprocess)}%`}\r\n               styles={{\r\n                 root: { width: '80px' },\r\n                 text: { fontSize: '10px' },\r\n               }}\r\n             />\r\n             <div style={styles.progressMessage}>{progressMessages.preprocess}</div>\r\n           </div>\r\n           <div style={styles.progressItem}>\r\n             <CircularProgressbar\r\n               value={progress.geocode}\r\n               text={`${Math.round(progress.geocode)}%`}\r\n               styles={{\r\n                 root: { width: '80px' },\r\n                 text: { fontSize: '10px' },\r\n               }}\r\n             />\r\n             <div style={styles.progressMessage}>{progressMessages.geocode}</div>\r\n           </div>\r\n         </div>\r\n\r\n\r\n         {/* Upload Data Section */}\r\n         <div style={styles.section}>\r\n           <h3 style={styles.sectionTitle}>Upload Data</h3>\r\n           <input\r\n             type=\"file\"\r\n             accept=\".json, .csv\"\r\n             onChange={handleFileUpload}\r\n             style={styles.fileInput}\r\n           />\r\n         </div>\r\n\r\n\r\n         {/* Mark Locations Button */}\r\n         {geoData.length > 0 && !markersAdded && (\r\n           <div style={styles.section}>\r\n             <button\r\n               onClick={renderMarkers}\r\n               style={{\r\n                 ...styles.chartButton,\r\n                 backgroundColor: '#17a2b8',\r\n                 width: '100%',\r\n               }}\r\n             >\r\n               Mark Locations on Map\r\n             </button>\r\n           </div>\r\n         )}\r\n\r\n\r\n         {/* Dataset Details Section */}\r\n         <div style={styles.section}>\r\n           <h3 style={styles.sectionTitle}>Dataset Details</h3>\r\n           {geoData.length > 0 ? (\r\n             <div style={styles.datasetDetails}>\r\n               <p>\r\n                 <strong>Rows:</strong> {totalRows}\r\n               </p>\r\n               <p>\r\n                 <strong>Columns:</strong> {totalColumns}\r\n               </p>\r\n               <p>\r\n                 <strong>Numeric Columns:</strong> {numericHeaders.join(', ')}\r\n               </p>\r\n               <p>\r\n                 <strong>String Columns:</strong> {stringHeaders.join(', ')}\r\n               </p>\r\n             </div>\r\n           ) : (\r\n             <p>No dataset uploaded yet.</p>\r\n           )}\r\n         </div>\r\n\r\n\r\n         {/* Location Comparison Section */}\r\n         <div style={styles.section}>\r\n           <h3 style={styles.sectionTitle}>Compare Two Locations</h3>\r\n           <div style={styles.inputGroup}>\r\n             <label style={styles.inputLabel}>Location 1:</label>\r\n             <select\r\n               value={selectedCity1}\r\n               onChange={(e) => setSelectedCity1(e.target.value)}\r\n               style={styles.selectDropdown}\r\n               disabled={cityList.length === 0}\r\n             >\r\n               <option value=\"\">Select Location</option>\r\n               {cityList.map((city) => (\r\n                 <option key={city} value={city}>\r\n                   {city}\r\n                 </option>\r\n               ))}\r\n             </select>\r\n           </div>\r\n           <div style={styles.inputGroup}>\r\n             <label style={styles.inputLabel}>Location 2:</label>\r\n             <select\r\n               value={selectedCity2}\r\n               onChange={(e) => setSelectedCity2(e.target.value)}\r\n               style={styles.selectDropdown}\r\n               disabled={cityList.length === 0}\r\n             >\r\n               <option value=\"\">Select Location</option>\r\n               {cityList.map((city) => (\r\n                 <option key={city} value={city}>\r\n                   {city}\r\n                 </option>\r\n               ))}\r\n             </select>\r\n           </div>\r\n           <button\r\n             onClick={handleCitySelection}\r\n             disabled={!selectedCity1 || !selectedCity2}\r\n             style={{\r\n               ...styles.chartButton,\r\n               backgroundColor:\r\n                 selectedCity1 && selectedCity2 ? '#28a745' : '#6c757d',\r\n             }}\r\n           >\r\n             Compare\r\n           </button>\r\n         </div>\r\n\r\n\r\n         {/* Chart Type Selection Section */}\r\n         <div style={styles.section}>\r\n           <h3 style={styles.sectionTitle}>Select Chart Type</h3>\r\n           <div style={styles.chartOptions}>\r\n             <button\r\n               onClick={() => setChartType('Bar')}\r\n               style={{\r\n                 ...styles.chartButton,\r\n                 ...(chartType === 'Bar' ? styles.chartButtonActive : {}),\r\n               }}\r\n             >\r\n               Bar Chart\r\n             </button>\r\n             <button\r\n               onClick={() => setChartType('Pie')}\r\n               style={{\r\n                 ...styles.chartButton,\r\n                 ...(chartType === 'Pie' ? styles.chartButtonActive : {}),\r\n               }}\r\n             >\r\n               Pie Chart\r\n             </button>\r\n             <button\r\n               onClick={() => setChartType('Doughnut')}\r\n               style={{\r\n                 ...styles.chartButton,\r\n                 ...(chartType === 'Doughnut' ? styles.chartButtonActive : {}),\r\n               }}\r\n             >\r\n               Doughnut Chart\r\n             </button>\r\n             <button\r\n               onClick={() => setChartType('PolarArea')}\r\n               style={{\r\n                 ...styles.chartButton,\r\n                 ...(chartType === 'PolarArea' ? styles.chartButtonActive : {}),\r\n               }}\r\n             >\r\n               PolarArea Chart\r\n             </button>\r\n           </div>\r\n         </div>\r\n       </div>\r\n\r\n\r\n       {/* Chart Display Section */}\r\n       {chartData && (\r\n         <div style={styles.chartContainer}>\r\n           <div style={styles.chartWrapper}>\r\n             <div style={styles.chartContent}>\r\n               <h3>{chartType} Chart</h3>\r\n               {chartType === 'Bar' && <Bar data={chartData} options={chartOptions} />}\r\n               {chartType === 'Pie' && <Pie data={chartData} options={chartOptions} />}\r\n               {chartType === 'Doughnut' && (\r\n                 <Doughnut data={chartData} options={chartOptions} />\r\n               )}\r\n               {chartType === 'PolarArea' && (\r\n                 <PolarArea data={chartData} options={chartOptions} />\r\n               )}\r\n             </div>\r\n           </div>\r\n         </div>\r\n       )}\r\n     </div>\r\n   </div>\r\n );\r\n};\r\n\r\n\r\nexport default MapView;\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}