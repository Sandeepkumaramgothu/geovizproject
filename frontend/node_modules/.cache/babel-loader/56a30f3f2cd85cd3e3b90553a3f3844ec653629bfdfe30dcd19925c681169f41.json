{"ast":null,"code":"var _jsxFileName = \"/Users/girishkumarpatchikoru/Desktop/projecthci/geovizproject/frontend/src/components/MapView.js\",\n  _s = $RefreshSig$();\n// src/components/MapView.js\n\nimport React, { useEffect, useState, useCallback } from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport Papa from 'papaparse';\nimport { Bar, Pie, Doughnut, PolarArea } from 'react-chartjs-2';\nimport { Chart as ChartJS, RadialLinearScale, CategoryScale, LinearScale, BarElement, ArcElement, Title, Tooltip, Legend } from 'chart.js';\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\nimport { CircularProgressbar } from 'react-circular-progressbar';\nimport 'react-circular-progressbar/dist/styles.css';\nimport styles from './styles'; // Ensure this file exists and is properly configured\nimport preprocessData from './preprocessData'; // Ensure this file exists and is properly configured\nimport { MAPBOX_TOKEN } from './constants'; // Ensure this file exists and contains your Mapbox token\nimport blueMarkerIcon from '../assets/images/custom-marker-blue.png'; // Ensure these assets exist\nimport redMarkerIcon from '../assets/images/custom-marker-red.png';\nimport './marker.css'; // Ensure this CSS file exists for marker styling\n\n// Register Chart.js components\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(RadialLinearScale, CategoryScale, LinearScale, BarElement, ArcElement, Title, Tooltip, Legend, ChartDataLabels);\n\n// Set Mapbox access token\nmapboxgl.accessToken = MAPBOX_TOKEN;\nconst MapView = () => {\n  _s();\n  // State Variables\n  const [map, setMap] = useState(null);\n  const [geoData, setGeoData] = useState([]);\n  const [numericHeaders, setNumericHeaders] = useState([]);\n  const [stringHeaders, setStringHeaders] = useState([]);\n  const [selectedLocation, setSelectedLocation] = useState(null);\n  const [chartType, setChartType] = useState('Bar');\n  const [chartData, setChartData] = useState(null);\n  const [totalRows, setTotalRows] = useState(0);\n  const [totalColumns, setTotalColumns] = useState(0);\n  const [markers, setMarkers] = useState([]);\n  const [progress, setProgress] = useState({\n    upload: 0,\n    preprocess: 0,\n    geocode: 0\n  });\n  const [progressMessages, setProgressMessages] = useState({\n    upload: '',\n    preprocess: '',\n    geocode: ''\n  });\n  const [stateList, setStateList] = useState([]); // Changed to stateList\n  const [selectedState1, setSelectedState1] = useState('');\n  const [selectedState2, setSelectedState2] = useState('');\n  const [locationColumn, setLocationColumn] = useState('');\n  const [markersAdded, setMarkersAdded] = useState(false);\n  const [dataNeedsGeocoding, setDataNeedsGeocoding] = useState(true);\n  const [compareMarkersEnabled, setCompareMarkersEnabled] = useState(false);\n  const [stateCoordinates, setStateCoordinates] = useState({}); // To store state centroids for markers\n\n  // Initialize Map\n  useEffect(() => {\n    const initializeMap = new mapboxgl.Map({\n      container: 'map',\n      // HTML container id\n      style: 'mapbox://styles/mapbox/streets-v11',\n      // style URL\n      center: [-98.5795, 39.8283],\n      // starting position [lng, lat] (center of USA)\n      zoom: 3 // starting zoom\n    });\n\n    // Add navigation control (the +/- zoom buttons)\n    const nav = new mapboxgl.NavigationControl();\n    initializeMap.addControl(nav, 'top-right');\n    setMap(initializeMap);\n\n    // Clean up on unmount\n    return () => initializeMap.remove();\n  }, []);\n\n  // Reverse Geocode Function to get State Name\n  const reverseGeocodeState = async (latitude, longitude) => {\n    try {\n      const response = await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${longitude},${latitude}.json?types=region&access_token=${MAPBOX_TOKEN}`);\n      const data = await response.json();\n      if (data.features && data.features.length > 0) {\n        return data.features[0].text; // Returns the state name\n      } else {\n        return null;\n      }\n    } catch (error) {\n      console.error('Reverse geocoding error:', error);\n      return null;\n    }\n  };\n\n  // Preprocess Data Function\n  const handlePreprocess = useCallback(async rawData => {\n    // Determine if data contains latitude and longitude\n    const dataContainsLatLng = rawData.some(item => item.latitude && item.longitude);\n    setDataNeedsGeocoding(!dataContainsLatLng);\n\n    // Determine the location column dynamically\n    const possibleLocationColumns = ['State', 'state', 'Province', 'province'\n    // Include more possible state columns if necessary\n    ];\n    let detectedLocationColumn = possibleLocationColumns.find(col => rawData[0] && rawData[0].hasOwnProperty(col));\n    setLocationColumn(detectedLocationColumn || 'state');\n    console.log('Detected Location Column:', detectedLocationColumn);\n\n    // Preprocess data\n    const processedData = await preprocessData(rawData, setProgress, detectedLocationColumn);\n    if (!processedData || processedData.length === 0) {\n      alert('No valid data after preprocessing.');\n      return;\n    }\n\n    // Initialize state data aggregation\n    const stateDataMap = {};\n    const stateCoordsMap = {}; // To store state coordinates\n\n    if (dataContainsLatLng) {\n      // Data contains latitude and longitude, need to reverse geocode to get state names\n      for (const item of processedData) {\n        const latitude = parseFloat(item.latitude);\n        const longitude = parseFloat(item.longitude);\n        if (!isNaN(latitude) && !isNaN(longitude)) {\n          let stateName = await reverseGeocodeState(latitude, longitude);\n          if (!stateName) continue; // Skip if state name couldn't be retrieved\n\n          // Aggregate data per state\n          if (!stateDataMap[stateName]) {\n            stateDataMap[stateName] = {\n              ...item\n            };\n            possibleLocationColumns.forEach(col => {\n              delete stateDataMap[stateName][col];\n            });\n            stateDataMap[stateName].state = stateName;\n            stateDataMap[stateName].count = 1;\n            stateCoordsMap[stateName] = {\n              latitude,\n              longitude\n            };\n          } else {\n            // Sum numeric fields\n            numericHeaders.forEach(header => {\n              stateDataMap[stateName][header] = (stateDataMap[stateName][header] || 0) + parseFloat(item[header] || 0);\n            });\n            stateDataMap[stateName].count += 1;\n          }\n        }\n      }\n    } else if (detectedLocationColumn) {\n      // Data contains state names\n      for (const item of processedData) {\n        const stateName = item[detectedLocationColumn];\n        if (!stateName) continue;\n\n        // Aggregate data per state\n        if (!stateDataMap[stateName]) {\n          stateDataMap[stateName] = {\n            ...item\n          };\n          possibleLocationColumns.forEach(col => {\n            delete stateDataMap[stateName][col];\n          });\n          stateDataMap[stateName].state = stateName;\n          stateDataMap[stateName].count = 1;\n        } else {\n          // Sum numeric fields\n          numericHeaders.forEach(header => {\n            stateDataMap[stateName][header] = (stateDataMap[stateName][header] || 0) + parseFloat(item[header] || 0);\n          });\n          stateDataMap[stateName].count += 1;\n        }\n      }\n\n      // Geocode states to get their coordinates\n      for (const stateName of Object.keys(stateDataMap)) {\n        const response = await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(stateName)}.json?types=region&access_token=${MAPBOX_TOKEN}`);\n        const data = await response.json();\n        if (data.features && data.features.length > 0) {\n          const [longitude, latitude] = data.features[0].center;\n          stateCoordsMap[stateName] = {\n            latitude,\n            longitude\n          };\n        }\n      }\n    } else {\n      alert('No location information found in the dataset.');\n      return;\n    }\n\n    // Calculate averages for numeric fields\n    const aggregatedData = Object.values(stateDataMap).map(item => {\n      const count = item.count || 1;\n      numericHeaders.forEach(header => {\n        item[header] = parseFloat(item[header]) / count;\n      });\n      return item;\n    });\n    setGeoData(aggregatedData);\n    setStateCoordinates(stateCoordsMap);\n\n    // Identify numeric and string headers\n    if (aggregatedData.length > 0) {\n      const headers = Object.keys(aggregatedData[0]);\n      const numeric = [];\n      const strings = [];\n      headers.forEach(header => {\n        if (['latitude', 'longitude', 'GeoLocation', 'locationID'].includes(header)) return;\n        const isNumeric = aggregatedData.every(item => {\n          const value = parseFloat(item[header]);\n          return !isNaN(value);\n        });\n        if (isNumeric) {\n          numeric.push(header);\n        } else {\n          strings.push(header);\n        }\n      });\n      setNumericHeaders(numeric);\n      setStringHeaders(strings);\n      setTotalRows(aggregatedData.length);\n      setTotalColumns(headers.length);\n\n      // Extract unique states for comparison\n      const uniqueStates = Object.keys(stateDataMap);\n      setStateList(uniqueStates);\n    } else {\n      alert('No data available after filtering.');\n    }\n\n    // Reset markersAdded state when new data is uploaded\n    setMarkersAdded(false);\n  }, [numericHeaders, reverseGeocodeState]);\n\n  // Generate a human-readable label for the location\n  const getLocationLabel = useCallback(data => {\n    if (data.state) return data.state;\n    return 'Unknown State';\n  }, []);\n\n  // Handle File Upload\n  const handleFileUpload = event => {\n    setProgress({\n      upload: 0,\n      preprocess: 0,\n      geocode: 0\n    });\n    setProgressMessages({\n      upload: '',\n      preprocess: '',\n      geocode: ''\n    });\n    const file = event.target.files[0];\n    if (file) {\n      const fileExtension = file.name.split('.').pop().toLowerCase();\n      if (fileExtension === 'json') {\n        const reader = new FileReader();\n        reader.onload = async e => {\n          try {\n            const data = JSON.parse(e.target.result);\n            setProgress(prev => ({\n              ...prev,\n              upload: 100\n            }));\n            setProgressMessages(prev => ({\n              ...prev,\n              upload: 'Dataset uploaded successfully.'\n            }));\n            await handlePreprocess(data);\n          } catch (error) {\n            console.error('Invalid JSON format:', error);\n            alert('Error: Uploaded file is not valid JSON.');\n          }\n        };\n        reader.readAsText(file);\n      } else if (fileExtension === 'csv') {\n        Papa.parse(file, {\n          header: true,\n          skipEmptyLines: true,\n          beforeFirstChunk: chunk => {\n            // Handle datasets with metadata rows\n            const lines = chunk.trim().split('\\n');\n            const dataStartIndex = lines.findIndex(line => line.startsWith('Country Name') || line.startsWith('state') || line.startsWith('RowId'));\n            if (dataStartIndex > 0) {\n              return lines.slice(dataStartIndex).join('\\n');\n            }\n            return chunk;\n          },\n          complete: async results => {\n            setProgress(prev => ({\n              ...prev,\n              upload: 100\n            }));\n            setProgressMessages(prev => ({\n              ...prev,\n              upload: 'Dataset uploaded successfully.'\n            }));\n            await handlePreprocess(results.data);\n          },\n          error: error => {\n            console.error('CSV parsing error:', error);\n            alert('Error: Failed to parse CSV file.');\n          }\n        });\n      } else {\n        alert('Please upload a valid JSON or CSV file.');\n      }\n    }\n  };\n\n  // Monitor Progress Updates\n  useEffect(() => {\n    if (progress.preprocess === 100) {\n      setProgressMessages(prev => ({\n        ...prev,\n        preprocess: 'Preprocessing completed.'\n      }));\n    }\n  }, [progress.preprocess]);\n  useEffect(() => {\n    if (progress.geocode === 100) {\n      setProgressMessages(prev => ({\n        ...prev,\n        geocode: 'Locations marked on the map.'\n      }));\n    }\n  }, [progress.geocode]);\n\n  // Handle Location Selection from Map\n  const handleLocationSelect = useCallback(locationData => {\n    console.log('Marker clicked:', locationData); // Debugging statement\n    // Clear state selections if a map marker is selected\n    setSelectedState1('');\n    setSelectedState2('');\n    if (selectedLocation && selectedLocation.state === locationData.state) {\n      setSelectedLocation(null); // Deselect\n      setChartData(null);\n    } else {\n      setSelectedLocation(locationData);\n      setChartData(null);\n    }\n  }, [selectedLocation]);\n\n  // Handle Location Comparison Selection\n  const handleStateSelection = () => {\n    if (selectedState1 && selectedState2) {\n      const data1 = geoData.filter(item => item.state === selectedState1);\n      const data2 = geoData.filter(item => item.state === selectedState2);\n      if (data1.length === 0 || data2.length === 0) {\n        alert('One or both selected states have no data.');\n        return;\n      }\n      const aggregatedData1 = data1[0];\n      const aggregatedData2 = data2[0];\n\n      // Normalize data for chart display (0.5% to 10%)\n      const dataMin = 0; // Minimum data value\n      const dataMax = Math.max(...numericHeaders.map(header => Math.max(aggregatedData1[header], aggregatedData2[header])));\n      const range = dataMax - dataMin || 1; // Avoid division by zero\n\n      const normalizedData1 = {};\n      const normalizedData2 = {};\n      const actualData1 = {};\n      const actualData2 = {};\n      numericHeaders.forEach(header => {\n        normalizedData1[header] = (aggregatedData1[header] - dataMin) / range * 9.5 + 0.5;\n        normalizedData2[header] = (aggregatedData2[header] - dataMin) / range * 9.5 + 0.5;\n        actualData1[header] = aggregatedData1[header];\n        actualData2[header] = aggregatedData2[header];\n      });\n\n      // Prepare chart data\n      const labels = numericHeaders;\n      const dataSet = {\n        labels,\n        datasets: [{\n          label: selectedState1,\n          data: numericHeaders.map(header => normalizedData1[header]),\n          actualValues: numericHeaders.map(header => actualData1[header]),\n          backgroundColor: 'rgba(255, 99, 132, 0.5)',\n          borderColor: 'rgba(255, 99, 132, 1)',\n          borderWidth: 1\n        }, {\n          label: selectedState2,\n          data: numericHeaders.map(header => normalizedData2[header]),\n          actualValues: numericHeaders.map(header => actualData2[header]),\n          backgroundColor: 'rgba(54, 162, 235, 0.5)',\n          borderColor: 'rgba(54, 162, 235, 1)',\n          borderWidth: 1\n        }]\n      };\n      setChartData(dataSet);\n      setSelectedLocation(null); // Deselect any single location\n\n      // Enable the \"Mark on Map\" button\n      setCompareMarkersEnabled(true);\n    }\n  };\n\n  // Generate Chart Data for Selected Location\n  const generateChartData = useCallback(() => {\n    if (selectedLocation) {\n      const locationValues = numericHeaders.map(header => ({\n        label: header,\n        value: parseFloat(selectedLocation[header]) || 0\n      }));\n\n      // Normalize data for chart display (0.5% to 10%)\n      const dataMin = 0; // Minimum data value\n      const dataMax = Math.max(...locationValues.map(item => item.value));\n      const range = dataMax - dataMin || 1; // Avoid division by zero\n\n      const normalizedValues = locationValues.map(item => ({\n        label: item.label,\n        normalizedValue: (item.value - dataMin) / range * 9.5 + 0.5,\n        actualValue: item.value // Keep the actual value\n      }));\n      setChartData({\n        labels: normalizedValues.map(item => item.label),\n        datasets: [{\n          label: getLocationLabel(selectedLocation),\n          data: normalizedValues.map(item => item.normalizedValue),\n          actualValues: normalizedValues.map(item => item.actualValue),\n          // Store actual values\n          backgroundColor: ['rgba(255, 99, 132, 0.5)', 'rgba(54, 162, 235, 0.5)', 'rgba(255, 206, 86, 0.5)', 'rgba(75, 192, 192, 0.5)', 'rgba(153, 102, 255, 0.5)', 'rgba(255, 159, 64, 0.5)'],\n          borderColor: ['rgba(255, 99, 132, 1)', 'rgba(54, 162, 235, 1)', 'rgba(255, 206, 86, 1)', 'rgba(75, 192, 192, 1)', 'rgba(153, 102, 255, 1)', 'rgba(255, 159, 64, 1)'],\n          borderWidth: 1\n        }]\n      });\n    }\n  }, [selectedLocation, numericHeaders, getLocationLabel]);\n\n  // Data Generation\n  useEffect(() => {\n    generateChartData();\n  }, [generateChartData, chartType]);\n\n  // Markers on Map\n  const renderMarkers = useCallback(() => {\n    if (map && geoData.length > 0) {\n      // Remove existing markers\n      markers.forEach(marker => marker.remove());\n      const newMarkers = [];\n      geoData.forEach(data => {\n        const stateName = data.state;\n        const coords = stateCoordinates[stateName];\n        if (!coords) return;\n        const latitude = parseFloat(coords.latitude);\n        const longitude = parseFloat(coords.longitude);\n        if (!isNaN(latitude) && !isNaN(longitude)) {\n          const el = document.createElement('div');\n          el.className = 'marker';\n          const isSelected = selectedLocation ? selectedLocation.state === data.state : false;\n          const icon = isSelected ? redMarkerIcon : blueMarkerIcon;\n          el.style.backgroundImage = `url(${icon})`;\n          el.style.width = '30px';\n          el.style.height = '30px';\n          el.style.backgroundSize = 'contain';\n          el.style.cursor = 'pointer';\n          const marker = new mapboxgl.Marker(el).setLngLat([longitude, latitude]).addTo(map);\n          marker.getElement().addEventListener('click', () => {\n            handleLocationSelect(data);\n          });\n          newMarkers.push(marker);\n        }\n      });\n      setMarkers(newMarkers);\n      setMarkersAdded(true);\n      setProgress(prev => ({\n        ...prev,\n        geocode: 100\n      }));\n      setProgressMessages(prev => ({\n        ...prev,\n        geocode: 'Locations marked on the map.'\n      }));\n    }\n  }, [map, geoData, selectedLocation, handleLocationSelect, stateCoordinates]);\n\n  // Render Selected Markers\n  const renderSelectedMarkers = useCallback(async () => {\n    if (map && selectedState1 && selectedState2) {\n      // Remove existing markers\n      markers.forEach(marker => marker.remove());\n      const newMarkers = [];\n      const selectedStates = [selectedState1, selectedState2];\n      const bounds = new mapboxgl.LngLatBounds();\n      for (const stateName of selectedStates) {\n        const data = geoData.find(item => item.state === stateName);\n        if (!data) continue;\n        const coords = stateCoordinates[stateName];\n        if (!coords) continue;\n        const latitude = parseFloat(coords.latitude);\n        const longitude = parseFloat(coords.longitude);\n        if (!isNaN(latitude) && !isNaN(longitude)) {\n          const el = document.createElement('div');\n          el.className = 'marker';\n          el.style.backgroundImage = `url(${blueMarkerIcon})`;\n          el.style.width = '30px';\n          el.style.height = '30px';\n          el.style.backgroundSize = 'contain';\n          el.style.cursor = 'pointer';\n          const marker = new mapboxgl.Marker(el).setLngLat([longitude, latitude]).addTo(map);\n\n          // Add a popup or label with the state name\n          const popup = new mapboxgl.Popup({\n            offset: 25\n          }).setText(stateName);\n          marker.setPopup(popup);\n          bounds.extend([longitude, latitude]);\n          newMarkers.push(marker);\n        }\n      }\n      setMarkers(newMarkers);\n      setMarkersAdded(true);\n\n      // Adjust the map to fit the markers\n      if (!bounds.isEmpty()) {\n        map.fitBounds(bounds, {\n          padding: 50\n        });\n      }\n    }\n  }, [map, selectedState1, selectedState2, geoData, markers, stateCoordinates]);\n\n  // Re-render markers when selectedLocation changes to update marker colors\n  useEffect(() => {\n    if (markersAdded && dataNeedsGeocoding) {\n      renderMarkers();\n    }\n  }, [selectedLocation, renderMarkers, markersAdded, dataNeedsGeocoding]);\n\n  // Chart Options\n  const chartOptions = {\n    responsive: true,\n    maintainAspectRatio: false,\n    scales: chartType === 'Bar' ? {\n      y: {\n        beginAtZero: true,\n        min: 0.5,\n        max: 10\n      }\n    } : {},\n    plugins: {\n      legend: {\n        position: 'top'\n      },\n      datalabels: {\n        display: true,\n        color: '#000',\n        align: 'center',\n        // Align labels to the center of the bars\n        anchor: 'center',\n        formatter: function (value, context) {\n          const dataset = context.chart.data.datasets[context.datasetIndex];\n          if (dataset.actualValues) {\n            const actualValue = dataset.actualValues[context.dataIndex];\n            return actualValue.toFixed(2); // Display actual value\n          } else {\n            return value.toFixed(2);\n          }\n        }\n      },\n      tooltip: {\n        callbacks: {\n          label: function (context) {\n            const dataset = context.dataset;\n            if (dataset.actualValues) {\n              const actualValue = dataset.actualValues[context.dataIndex];\n              return `${context.label}: ${actualValue.toFixed(2)}`;\n            } else {\n              return `${context.label}: ${context.parsed.y}`;\n            }\n          }\n        }\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"map\",\n      style: styles.map\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 680,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.sidebar,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.combinedBox,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.progressContainer,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.progressItem,\n            children: [/*#__PURE__*/_jsxDEV(CircularProgressbar, {\n              value: progress.upload,\n              text: `${Math.round(progress.upload)}%`,\n              styles: {\n                root: {\n                  width: '80px'\n                },\n                text: {\n                  fontSize: '10px'\n                }\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 689,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.progressMessage,\n              children: progressMessages.upload\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 697,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 688,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.progressItem,\n            children: [/*#__PURE__*/_jsxDEV(CircularProgressbar, {\n              value: progress.preprocess,\n              text: `${Math.round(progress.preprocess)}%`,\n              styles: {\n                root: {\n                  width: '80px'\n                },\n                text: {\n                  fontSize: '10px'\n                }\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 700,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.progressMessage,\n              children: progressMessages.preprocess\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 708,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 699,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.progressItem,\n            children: [/*#__PURE__*/_jsxDEV(CircularProgressbar, {\n              value: progress.geocode,\n              text: `${Math.round(progress.geocode)}%`,\n              styles: {\n                root: {\n                  width: '80px'\n                },\n                text: {\n                  fontSize: '10px'\n                }\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 711,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.progressMessage,\n              children: progressMessages.geocode\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 719,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 710,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 687,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.section,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: styles.sectionTitle,\n            children: \"Upload Data\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 725,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \".json, .csv\",\n            onChange: handleFileUpload,\n            style: styles.fileInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 726,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 724,\n          columnNumber: 11\n        }, this), geoData.length > 0 && !markersAdded && dataNeedsGeocoding && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.section,\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: renderMarkers,\n            style: {\n              ...styles.chartButton,\n              backgroundColor: '#17a2b8',\n              width: '100%'\n            },\n            children: \"Mark Locations on Map\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 737,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 736,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.section,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: styles.sectionTitle,\n            children: \"Dataset Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 752,\n            columnNumber: 13\n          }, this), geoData.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.datasetDetails,\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Rows:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 756,\n                columnNumber: 19\n              }, this), \" \", totalRows]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 755,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Columns:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 759,\n                columnNumber: 19\n              }, this), \" \", totalColumns]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 758,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Numeric Columns:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 762,\n                columnNumber: 19\n              }, this), \" \", numericHeaders.join(', ')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 761,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"String Columns:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 765,\n                columnNumber: 19\n              }, this), \" \", stringHeaders.join(', ')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 764,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 754,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No dataset uploaded yet.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 769,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 751,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.section,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: styles.sectionTitle,\n            children: \"Compare Two States\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 775,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.inputGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.inputLabel,\n              children: \"State 1:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 777,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: selectedState1,\n              onChange: e => setSelectedState1(e.target.value),\n              style: styles.selectDropdown,\n              disabled: stateList.length === 0,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select State\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 784,\n                columnNumber: 17\n              }, this), stateList.map(state => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: state,\n                children: state\n              }, state, false, {\n                fileName: _jsxFileName,\n                lineNumber: 786,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 778,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 776,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.inputGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.inputLabel,\n              children: \"State 2:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 793,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: selectedState2,\n              onChange: e => setSelectedState2(e.target.value),\n              style: styles.selectDropdown,\n              disabled: stateList.length === 0,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select State\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 800,\n                columnNumber: 17\n              }, this), stateList.map(state => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: state,\n                children: state\n              }, state, false, {\n                fileName: _jsxFileName,\n                lineNumber: 802,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 794,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 792,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleStateSelection,\n            disabled: !selectedState1 || !selectedState2,\n            style: {\n              ...styles.chartButton,\n              backgroundColor: selectedState1 && selectedState2 ? '#28a745' : '#6c757d'\n            },\n            children: \"Compare\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 808,\n            columnNumber: 13\n          }, this), compareMarkersEnabled && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '10px'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: renderSelectedMarkers,\n              style: {\n                ...styles.chartButton,\n                backgroundColor: '#17a2b8',\n                width: '100%'\n              },\n              children: \"Mark on Map\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 823,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 822,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 774,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.section,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: styles.sectionTitle,\n            children: \"Select Chart Type\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 839,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.chartOptions,\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setChartType('Bar'),\n              style: {\n                ...styles.chartButton,\n                ...(chartType === 'Bar' ? styles.chartButtonActive : {})\n              },\n              children: \"Bar Chart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 841,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setChartType('Pie'),\n              style: {\n                ...styles.chartButton,\n                ...(chartType === 'Pie' ? styles.chartButtonActive : {})\n              },\n              children: \"Pie Chart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 850,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setChartType('Doughnut'),\n              style: {\n                ...styles.chartButton,\n                ...(chartType === 'Doughnut' ? styles.chartButtonActive : {})\n              },\n              children: \"Doughnut Chart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 859,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setChartType('PolarArea'),\n              style: {\n                ...styles.chartButton,\n                ...(chartType === 'PolarArea' ? styles.chartButtonActive : {})\n              },\n              children: \"PolarArea Chart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 868,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 840,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 838,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 685,\n        columnNumber: 9\n      }, this), chartData && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.chartContainer,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.chartWrapper,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.chartContent,\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [chartType, \" Chart\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 886,\n              columnNumber: 17\n            }, this), chartType === 'Bar' && /*#__PURE__*/_jsxDEV(Bar, {\n              data: chartData,\n              options: chartOptions\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 887,\n              columnNumber: 41\n            }, this), chartType === 'Pie' && /*#__PURE__*/_jsxDEV(Pie, {\n              data: chartData,\n              options: chartOptions\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 888,\n              columnNumber: 41\n            }, this), chartType === 'Doughnut' && /*#__PURE__*/_jsxDEV(Doughnut, {\n              data: chartData,\n              options: chartOptions\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 890,\n              columnNumber: 19\n            }, this), chartType === 'PolarArea' && /*#__PURE__*/_jsxDEV(PolarArea, {\n              data: chartData,\n              options: chartOptions\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 893,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 885,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 884,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 883,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 683,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 678,\n    columnNumber: 5\n  }, this);\n};\n_s(MapView, \"pR3llSR9fkKr+eCZWLjLDM4mZ/Q=\");\n_c = MapView;\nexport default MapView;\nvar _c;\n$RefreshReg$(_c, \"MapView\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","mapboxgl","Papa","Bar","Pie","Doughnut","PolarArea","Chart","ChartJS","RadialLinearScale","CategoryScale","LinearScale","BarElement","ArcElement","Title","Tooltip","Legend","ChartDataLabels","CircularProgressbar","styles","preprocessData","MAPBOX_TOKEN","blueMarkerIcon","redMarkerIcon","jsxDEV","_jsxDEV","register","accessToken","MapView","_s","map","setMap","geoData","setGeoData","numericHeaders","setNumericHeaders","stringHeaders","setStringHeaders","selectedLocation","setSelectedLocation","chartType","setChartType","chartData","setChartData","totalRows","setTotalRows","totalColumns","setTotalColumns","markers","setMarkers","progress","setProgress","upload","preprocess","geocode","progressMessages","setProgressMessages","stateList","setStateList","selectedState1","setSelectedState1","selectedState2","setSelectedState2","locationColumn","setLocationColumn","markersAdded","setMarkersAdded","dataNeedsGeocoding","setDataNeedsGeocoding","compareMarkersEnabled","setCompareMarkersEnabled","stateCoordinates","setStateCoordinates","initializeMap","Map","container","style","center","zoom","nav","NavigationControl","addControl","remove","reverseGeocodeState","latitude","longitude","response","fetch","data","json","features","length","text","error","console","handlePreprocess","rawData","dataContainsLatLng","some","item","possibleLocationColumns","detectedLocationColumn","find","col","hasOwnProperty","log","processedData","alert","stateDataMap","stateCoordsMap","parseFloat","isNaN","stateName","forEach","state","count","header","Object","keys","encodeURIComponent","aggregatedData","values","headers","numeric","strings","includes","isNumeric","every","value","push","uniqueStates","getLocationLabel","handleFileUpload","event","file","target","files","fileExtension","name","split","pop","toLowerCase","reader","FileReader","onload","e","JSON","parse","result","prev","readAsText","skipEmptyLines","beforeFirstChunk","chunk","lines","trim","dataStartIndex","findIndex","line","startsWith","slice","join","complete","results","handleLocationSelect","locationData","handleStateSelection","data1","filter","data2","aggregatedData1","aggregatedData2","dataMin","dataMax","Math","max","range","normalizedData1","normalizedData2","actualData1","actualData2","labels","dataSet","datasets","label","actualValues","backgroundColor","borderColor","borderWidth","generateChartData","locationValues","normalizedValues","normalizedValue","actualValue","renderMarkers","marker","newMarkers","coords","el","document","createElement","className","isSelected","icon","backgroundImage","width","height","backgroundSize","cursor","Marker","setLngLat","addTo","getElement","addEventListener","renderSelectedMarkers","selectedStates","bounds","LngLatBounds","popup","Popup","offset","setText","setPopup","extend","isEmpty","fitBounds","padding","chartOptions","responsive","maintainAspectRatio","scales","y","beginAtZero","min","plugins","legend","position","datalabels","display","color","align","anchor","formatter","context","dataset","chart","datasetIndex","dataIndex","toFixed","tooltip","callbacks","parsed","children","id","fileName","_jsxFileName","lineNumber","columnNumber","sidebar","combinedBox","progressContainer","progressItem","round","root","fontSize","progressMessage","section","sectionTitle","type","accept","onChange","fileInput","onClick","chartButton","datasetDetails","inputGroup","inputLabel","selectDropdown","disabled","marginTop","chartButtonActive","chartContainer","chartWrapper","chartContent","options","_c","$RefreshReg$"],"sources":["/Users/girishkumarpatchikoru/Desktop/projecthci/geovizproject/frontend/src/components/MapView.js"],"sourcesContent":["// src/components/MapView.js\r\n\r\nimport React, { useEffect, useState, useCallback } from 'react';\r\nimport mapboxgl from 'mapbox-gl';\r\nimport Papa from 'papaparse';\r\nimport { Bar, Pie, Doughnut, PolarArea } from 'react-chartjs-2';\r\nimport {\r\n  Chart as ChartJS,\r\n  RadialLinearScale,\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  ArcElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n} from 'chart.js';\r\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\r\nimport { CircularProgressbar } from 'react-circular-progressbar';\r\nimport 'react-circular-progressbar/dist/styles.css';\r\n\r\nimport styles from './styles'; // Ensure this file exists and is properly configured\r\nimport preprocessData from './preprocessData'; // Ensure this file exists and is properly configured\r\nimport { MAPBOX_TOKEN } from './constants'; // Ensure this file exists and contains your Mapbox token\r\nimport blueMarkerIcon from '../assets/images/custom-marker-blue.png'; // Ensure these assets exist\r\nimport redMarkerIcon from '../assets/images/custom-marker-red.png';\r\nimport './marker.css'; // Ensure this CSS file exists for marker styling\r\n\r\n// Register Chart.js components\r\nChartJS.register(\r\n  RadialLinearScale,\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  ArcElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n  ChartDataLabels\r\n);\r\n\r\n// Set Mapbox access token\r\nmapboxgl.accessToken = MAPBOX_TOKEN;\r\n\r\nconst MapView = () => {\r\n  // State Variables\r\n  const [map, setMap] = useState(null);\r\n  const [geoData, setGeoData] = useState([]);\r\n  const [numericHeaders, setNumericHeaders] = useState([]);\r\n  const [stringHeaders, setStringHeaders] = useState([]);\r\n  const [selectedLocation, setSelectedLocation] = useState(null);\r\n  const [chartType, setChartType] = useState('Bar');\r\n  const [chartData, setChartData] = useState(null);\r\n  const [totalRows, setTotalRows] = useState(0);\r\n  const [totalColumns, setTotalColumns] = useState(0);\r\n  const [markers, setMarkers] = useState([]);\r\n  const [progress, setProgress] = useState({\r\n    upload: 0,\r\n    preprocess: 0,\r\n    geocode: 0,\r\n  });\r\n  const [progressMessages, setProgressMessages] = useState({\r\n    upload: '',\r\n    preprocess: '',\r\n    geocode: '',\r\n  });\r\n  const [stateList, setStateList] = useState([]); // Changed to stateList\r\n  const [selectedState1, setSelectedState1] = useState('');\r\n  const [selectedState2, setSelectedState2] = useState('');\r\n  const [locationColumn, setLocationColumn] = useState('');\r\n  const [markersAdded, setMarkersAdded] = useState(false);\r\n  const [dataNeedsGeocoding, setDataNeedsGeocoding] = useState(true);\r\n  const [compareMarkersEnabled, setCompareMarkersEnabled] = useState(false);\r\n  const [stateCoordinates, setStateCoordinates] = useState({}); // To store state centroids for markers\r\n\r\n  // Initialize Map\r\n  useEffect(() => {\r\n    const initializeMap = new mapboxgl.Map({\r\n      container: 'map', // HTML container id\r\n      style: 'mapbox://styles/mapbox/streets-v11', // style URL\r\n      center: [-98.5795, 39.8283], // starting position [lng, lat] (center of USA)\r\n      zoom: 3, // starting zoom\r\n    });\r\n\r\n    // Add navigation control (the +/- zoom buttons)\r\n    const nav = new mapboxgl.NavigationControl();\r\n    initializeMap.addControl(nav, 'top-right');\r\n\r\n    setMap(initializeMap);\r\n\r\n    // Clean up on unmount\r\n    return () => initializeMap.remove();\r\n  }, []);\r\n\r\n  // Reverse Geocode Function to get State Name\r\n  const reverseGeocodeState = async (latitude, longitude) => {\r\n    try {\r\n      const response = await fetch(\r\n        `https://api.mapbox.com/geocoding/v5/mapbox.places/${longitude},${latitude}.json?types=region&access_token=${MAPBOX_TOKEN}`\r\n      );\r\n      const data = await response.json();\r\n      if (data.features && data.features.length > 0) {\r\n        return data.features[0].text; // Returns the state name\r\n      } else {\r\n        return null;\r\n      }\r\n    } catch (error) {\r\n      console.error('Reverse geocoding error:', error);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  // Preprocess Data Function\r\n  const handlePreprocess = useCallback(\r\n    async (rawData) => {\r\n      // Determine if data contains latitude and longitude\r\n      const dataContainsLatLng = rawData.some(\r\n        (item) => item.latitude && item.longitude\r\n      );\r\n\r\n      setDataNeedsGeocoding(!dataContainsLatLng);\r\n\r\n      // Determine the location column dynamically\r\n      const possibleLocationColumns = [\r\n        'State',\r\n        'state',\r\n        'Province',\r\n        'province',\r\n        // Include more possible state columns if necessary\r\n      ];\r\n      let detectedLocationColumn = possibleLocationColumns.find(\r\n        (col) => rawData[0] && rawData[0].hasOwnProperty(col)\r\n      );\r\n\r\n      setLocationColumn(detectedLocationColumn || 'state');\r\n\r\n      console.log('Detected Location Column:', detectedLocationColumn);\r\n\r\n      // Preprocess data\r\n      const processedData = await preprocessData(\r\n        rawData,\r\n        setProgress,\r\n        detectedLocationColumn\r\n      );\r\n\r\n      if (!processedData || processedData.length === 0) {\r\n        alert('No valid data after preprocessing.');\r\n        return;\r\n      }\r\n\r\n      // Initialize state data aggregation\r\n      const stateDataMap = {};\r\n      const stateCoordsMap = {}; // To store state coordinates\r\n\r\n      if (dataContainsLatLng) {\r\n        // Data contains latitude and longitude, need to reverse geocode to get state names\r\n        for (const item of processedData) {\r\n          const latitude = parseFloat(item.latitude);\r\n          const longitude = parseFloat(item.longitude);\r\n          if (!isNaN(latitude) && !isNaN(longitude)) {\r\n            let stateName = await reverseGeocodeState(latitude, longitude);\r\n            if (!stateName) continue; // Skip if state name couldn't be retrieved\r\n\r\n            // Aggregate data per state\r\n            if (!stateDataMap[stateName]) {\r\n              stateDataMap[stateName] = { ...item };\r\n              possibleLocationColumns.forEach((col) => {\r\n                delete stateDataMap[stateName][col];\r\n              });\r\n              stateDataMap[stateName].state = stateName;\r\n              stateDataMap[stateName].count = 1;\r\n              stateCoordsMap[stateName] = { latitude, longitude };\r\n            } else {\r\n              // Sum numeric fields\r\n              numericHeaders.forEach((header) => {\r\n                stateDataMap[stateName][header] =\r\n                  (stateDataMap[stateName][header] || 0) + parseFloat(item[header] || 0);\r\n              });\r\n              stateDataMap[stateName].count += 1;\r\n            }\r\n          }\r\n        }\r\n      } else if (detectedLocationColumn) {\r\n        // Data contains state names\r\n        for (const item of processedData) {\r\n          const stateName = item[detectedLocationColumn];\r\n          if (!stateName) continue;\r\n\r\n          // Aggregate data per state\r\n          if (!stateDataMap[stateName]) {\r\n            stateDataMap[stateName] = { ...item };\r\n            possibleLocationColumns.forEach((col) => {\r\n              delete stateDataMap[stateName][col];\r\n            });\r\n            stateDataMap[stateName].state = stateName;\r\n            stateDataMap[stateName].count = 1;\r\n          } else {\r\n            // Sum numeric fields\r\n            numericHeaders.forEach((header) => {\r\n              stateDataMap[stateName][header] =\r\n                (stateDataMap[stateName][header] || 0) + parseFloat(item[header] || 0);\r\n            });\r\n            stateDataMap[stateName].count += 1;\r\n          }\r\n        }\r\n\r\n        // Geocode states to get their coordinates\r\n        for (const stateName of Object.keys(stateDataMap)) {\r\n          const response = await fetch(\r\n            `https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(\r\n              stateName\r\n            )}.json?types=region&access_token=${MAPBOX_TOKEN}`\r\n          );\r\n          const data = await response.json();\r\n          if (data.features && data.features.length > 0) {\r\n            const [longitude, latitude] = data.features[0].center;\r\n            stateCoordsMap[stateName] = { latitude, longitude };\r\n          }\r\n        }\r\n      } else {\r\n        alert('No location information found in the dataset.');\r\n        return;\r\n      }\r\n\r\n      // Calculate averages for numeric fields\r\n      const aggregatedData = Object.values(stateDataMap).map((item) => {\r\n        const count = item.count || 1;\r\n        numericHeaders.forEach((header) => {\r\n          item[header] = parseFloat(item[header]) / count;\r\n        });\r\n        return item;\r\n      });\r\n\r\n      setGeoData(aggregatedData);\r\n      setStateCoordinates(stateCoordsMap);\r\n\r\n      // Identify numeric and string headers\r\n      if (aggregatedData.length > 0) {\r\n        const headers = Object.keys(aggregatedData[0]);\r\n        const numeric = [];\r\n        const strings = [];\r\n\r\n        headers.forEach((header) => {\r\n          if (\r\n            ['latitude', 'longitude', 'GeoLocation', 'locationID'].includes(header)\r\n          )\r\n            return;\r\n\r\n          const isNumeric = aggregatedData.every((item) => {\r\n            const value = parseFloat(item[header]);\r\n            return !isNaN(value);\r\n          });\r\n          if (isNumeric) {\r\n            numeric.push(header);\r\n          } else {\r\n            strings.push(header);\r\n          }\r\n        });\r\n\r\n        setNumericHeaders(numeric);\r\n        setStringHeaders(strings);\r\n\r\n        setTotalRows(aggregatedData.length);\r\n        setTotalColumns(headers.length);\r\n\r\n        // Extract unique states for comparison\r\n        const uniqueStates = Object.keys(stateDataMap);\r\n        setStateList(uniqueStates);\r\n      } else {\r\n        alert('No data available after filtering.');\r\n      }\r\n\r\n      // Reset markersAdded state when new data is uploaded\r\n      setMarkersAdded(false);\r\n    },\r\n    [numericHeaders, reverseGeocodeState]\r\n  );\r\n\r\n  // Generate a human-readable label for the location\r\n  const getLocationLabel = useCallback(\r\n    (data) => {\r\n      if (data.state) return data.state;\r\n      return 'Unknown State';\r\n    },\r\n    []\r\n  );\r\n\r\n  // Handle File Upload\r\n  const handleFileUpload = (event) => {\r\n    setProgress({\r\n      upload: 0,\r\n      preprocess: 0,\r\n      geocode: 0,\r\n    });\r\n    setProgressMessages({\r\n      upload: '',\r\n      preprocess: '',\r\n      geocode: '',\r\n    });\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      const fileExtension = file.name.split('.').pop().toLowerCase();\r\n\r\n      if (fileExtension === 'json') {\r\n        const reader = new FileReader();\r\n        reader.onload = async (e) => {\r\n          try {\r\n            const data = JSON.parse(e.target.result);\r\n            setProgress((prev) => ({ ...prev, upload: 100 }));\r\n            setProgressMessages((prev) => ({\r\n              ...prev,\r\n              upload: 'Dataset uploaded successfully.',\r\n            }));\r\n            await handlePreprocess(data);\r\n          } catch (error) {\r\n            console.error('Invalid JSON format:', error);\r\n            alert('Error: Uploaded file is not valid JSON.');\r\n          }\r\n        };\r\n        reader.readAsText(file);\r\n      } else if (fileExtension === 'csv') {\r\n        Papa.parse(file, {\r\n          header: true,\r\n          skipEmptyLines: true,\r\n          beforeFirstChunk: (chunk) => {\r\n            // Handle datasets with metadata rows\r\n            const lines = chunk.trim().split('\\n');\r\n            const dataStartIndex = lines.findIndex(\r\n              (line) =>\r\n                line.startsWith('Country Name') ||\r\n                line.startsWith('state') ||\r\n                line.startsWith('RowId')\r\n            );\r\n            if (dataStartIndex > 0) {\r\n              return lines.slice(dataStartIndex).join('\\n');\r\n            }\r\n            return chunk;\r\n          },\r\n          complete: async (results) => {\r\n            setProgress((prev) => ({ ...prev, upload: 100 }));\r\n            setProgressMessages((prev) => ({\r\n              ...prev,\r\n              upload: 'Dataset uploaded successfully.',\r\n            }));\r\n            await handlePreprocess(results.data);\r\n          },\r\n          error: (error) => {\r\n            console.error('CSV parsing error:', error);\r\n            alert('Error: Failed to parse CSV file.');\r\n          },\r\n        });\r\n      } else {\r\n        alert('Please upload a valid JSON or CSV file.');\r\n      }\r\n    }\r\n  };\r\n\r\n  // Monitor Progress Updates\r\n  useEffect(() => {\r\n    if (progress.preprocess === 100) {\r\n      setProgressMessages((prev) => ({\r\n        ...prev,\r\n        preprocess: 'Preprocessing completed.',\r\n      }));\r\n    }\r\n  }, [progress.preprocess]);\r\n\r\n  useEffect(() => {\r\n    if (progress.geocode === 100) {\r\n      setProgressMessages((prev) => ({\r\n        ...prev,\r\n        geocode: 'Locations marked on the map.',\r\n      }));\r\n    }\r\n  }, [progress.geocode]);\r\n\r\n  // Handle Location Selection from Map\r\n  const handleLocationSelect = useCallback(\r\n    (locationData) => {\r\n      console.log('Marker clicked:', locationData); // Debugging statement\r\n      // Clear state selections if a map marker is selected\r\n      setSelectedState1('');\r\n      setSelectedState2('');\r\n      if (selectedLocation && selectedLocation.state === locationData.state) {\r\n        setSelectedLocation(null); // Deselect\r\n        setChartData(null);\r\n      } else {\r\n        setSelectedLocation(locationData);\r\n        setChartData(null);\r\n      }\r\n    },\r\n    [selectedLocation]\r\n  );\r\n\r\n  // Handle Location Comparison Selection\r\n  const handleStateSelection = () => {\r\n    if (selectedState1 && selectedState2) {\r\n      const data1 = geoData.filter((item) => item.state === selectedState1);\r\n      const data2 = geoData.filter((item) => item.state === selectedState2);\r\n\r\n      if (data1.length === 0 || data2.length === 0) {\r\n        alert('One or both selected states have no data.');\r\n        return;\r\n      }\r\n\r\n      const aggregatedData1 = data1[0];\r\n      const aggregatedData2 = data2[0];\r\n\r\n      // Normalize data for chart display (0.5% to 10%)\r\n      const dataMin = 0; // Minimum data value\r\n      const dataMax = Math.max(\r\n        ...numericHeaders.map((header) =>\r\n          Math.max(aggregatedData1[header], aggregatedData2[header])\r\n        )\r\n      );\r\n      const range = dataMax - dataMin || 1; // Avoid division by zero\r\n\r\n      const normalizedData1 = {};\r\n      const normalizedData2 = {};\r\n      const actualData1 = {};\r\n      const actualData2 = {};\r\n\r\n      numericHeaders.forEach((header) => {\r\n        normalizedData1[header] =\r\n          ((aggregatedData1[header] - dataMin) / range) * 9.5 + 0.5;\r\n        normalizedData2[header] =\r\n          ((aggregatedData2[header] - dataMin) / range) * 9.5 + 0.5;\r\n        actualData1[header] = aggregatedData1[header];\r\n        actualData2[header] = aggregatedData2[header];\r\n      });\r\n\r\n      // Prepare chart data\r\n      const labels = numericHeaders;\r\n      const dataSet = {\r\n        labels,\r\n        datasets: [\r\n          {\r\n            label: selectedState1,\r\n            data: numericHeaders.map((header) => normalizedData1[header]),\r\n            actualValues: numericHeaders.map((header) => actualData1[header]),\r\n            backgroundColor: 'rgba(255, 99, 132, 0.5)',\r\n            borderColor: 'rgba(255, 99, 132, 1)',\r\n            borderWidth: 1,\r\n          },\r\n          {\r\n            label: selectedState2,\r\n            data: numericHeaders.map((header) => normalizedData2[header]),\r\n            actualValues: numericHeaders.map((header) => actualData2[header]),\r\n            backgroundColor: 'rgba(54, 162, 235, 0.5)',\r\n            borderColor: 'rgba(54, 162, 235, 1)',\r\n            borderWidth: 1,\r\n          },\r\n        ],\r\n      };\r\n\r\n      setChartData(dataSet);\r\n      setSelectedLocation(null); // Deselect any single location\r\n\r\n      // Enable the \"Mark on Map\" button\r\n      setCompareMarkersEnabled(true);\r\n    }\r\n  };\r\n\r\n  // Generate Chart Data for Selected Location\r\n  const generateChartData = useCallback(() => {\r\n    if (selectedLocation) {\r\n      const locationValues = numericHeaders.map((header) => ({\r\n        label: header,\r\n        value: parseFloat(selectedLocation[header]) || 0,\r\n      }));\r\n\r\n      // Normalize data for chart display (0.5% to 10%)\r\n      const dataMin = 0; // Minimum data value\r\n      const dataMax = Math.max(...locationValues.map((item) => item.value));\r\n      const range = dataMax - dataMin || 1; // Avoid division by zero\r\n\r\n      const normalizedValues = locationValues.map((item) => ({\r\n        label: item.label,\r\n        normalizedValue: ((item.value - dataMin) / range) * 9.5 + 0.5,\r\n        actualValue: item.value, // Keep the actual value\r\n      }));\r\n\r\n      setChartData({\r\n        labels: normalizedValues.map((item) => item.label),\r\n        datasets: [\r\n          {\r\n            label: getLocationLabel(selectedLocation),\r\n            data: normalizedValues.map((item) => item.normalizedValue),\r\n            actualValues: normalizedValues.map((item) => item.actualValue), // Store actual values\r\n            backgroundColor: [\r\n              'rgba(255, 99, 132, 0.5)',\r\n              'rgba(54, 162, 235, 0.5)',\r\n              'rgba(255, 206, 86, 0.5)',\r\n              'rgba(75, 192, 192, 0.5)',\r\n              'rgba(153, 102, 255, 0.5)',\r\n              'rgba(255, 159, 64, 0.5)',\r\n            ],\r\n            borderColor: [\r\n              'rgba(255, 99, 132, 1)',\r\n              'rgba(54, 162, 235, 1)',\r\n              'rgba(255, 206, 86, 1)',\r\n              'rgba(75, 192, 192, 1)',\r\n              'rgba(153, 102, 255, 1)',\r\n              'rgba(255, 159, 64, 1)',\r\n            ],\r\n            borderWidth: 1,\r\n          },\r\n        ],\r\n      });\r\n    }\r\n  }, [selectedLocation, numericHeaders, getLocationLabel]);\r\n\r\n  // Data Generation\r\n  useEffect(() => {\r\n    generateChartData();\r\n  }, [generateChartData, chartType]);\r\n\r\n  // Markers on Map\r\n  const renderMarkers = useCallback(() => {\r\n    if (map && geoData.length > 0) {\r\n      // Remove existing markers\r\n      markers.forEach((marker) => marker.remove());\r\n      const newMarkers = [];\r\n\r\n      geoData.forEach((data) => {\r\n        const stateName = data.state;\r\n        const coords = stateCoordinates[stateName];\r\n        if (!coords) return;\r\n\r\n        const latitude = parseFloat(coords.latitude);\r\n        const longitude = parseFloat(coords.longitude);\r\n\r\n        if (!isNaN(latitude) && !isNaN(longitude)) {\r\n          const el = document.createElement('div');\r\n          el.className = 'marker';\r\n          const isSelected = selectedLocation\r\n            ? selectedLocation.state === data.state\r\n            : false;\r\n          const icon = isSelected ? redMarkerIcon : blueMarkerIcon;\r\n          el.style.backgroundImage = `url(${icon})`;\r\n          el.style.width = '30px';\r\n          el.style.height = '30px';\r\n          el.style.backgroundSize = 'contain';\r\n          el.style.cursor = 'pointer';\r\n\r\n          const marker = new mapboxgl.Marker(el)\r\n            .setLngLat([longitude, latitude])\r\n            .addTo(map);\r\n\r\n          marker.getElement().addEventListener('click', () => {\r\n            handleLocationSelect(data);\r\n          });\r\n\r\n          newMarkers.push(marker);\r\n        }\r\n      });\r\n      setMarkers(newMarkers);\r\n      setMarkersAdded(true);\r\n\r\n      setProgress((prev) => ({ ...prev, geocode: 100 }));\r\n      setProgressMessages((prev) => ({\r\n        ...prev,\r\n        geocode: 'Locations marked on the map.',\r\n      }));\r\n    }\r\n  }, [map, geoData, selectedLocation, handleLocationSelect, stateCoordinates]);\r\n\r\n  // Render Selected Markers\r\n  const renderSelectedMarkers = useCallback(async () => {\r\n    if (map && selectedState1 && selectedState2) {\r\n      // Remove existing markers\r\n      markers.forEach((marker) => marker.remove());\r\n      const newMarkers = [];\r\n\r\n      const selectedStates = [selectedState1, selectedState2];\r\n\r\n      const bounds = new mapboxgl.LngLatBounds();\r\n\r\n      for (const stateName of selectedStates) {\r\n        const data = geoData.find((item) => item.state === stateName);\r\n        if (!data) continue;\r\n        const coords = stateCoordinates[stateName];\r\n        if (!coords) continue;\r\n\r\n        const latitude = parseFloat(coords.latitude);\r\n        const longitude = parseFloat(coords.longitude);\r\n\r\n        if (!isNaN(latitude) && !isNaN(longitude)) {\r\n          const el = document.createElement('div');\r\n          el.className = 'marker';\r\n          el.style.backgroundImage = `url(${blueMarkerIcon})`;\r\n          el.style.width = '30px';\r\n          el.style.height = '30px';\r\n          el.style.backgroundSize = 'contain';\r\n          el.style.cursor = 'pointer';\r\n\r\n          const marker = new mapboxgl.Marker(el)\r\n            .setLngLat([longitude, latitude])\r\n            .addTo(map);\r\n\r\n          // Add a popup or label with the state name\r\n          const popup = new mapboxgl.Popup({ offset: 25 }).setText(stateName);\r\n          marker.setPopup(popup);\r\n\r\n          bounds.extend([longitude, latitude]);\r\n\r\n          newMarkers.push(marker);\r\n        }\r\n      }\r\n\r\n      setMarkers(newMarkers);\r\n      setMarkersAdded(true);\r\n\r\n      // Adjust the map to fit the markers\r\n      if (!bounds.isEmpty()) {\r\n        map.fitBounds(bounds, { padding: 50 });\r\n      }\r\n    }\r\n  }, [map, selectedState1, selectedState2, geoData, markers, stateCoordinates]);\r\n\r\n  // Re-render markers when selectedLocation changes to update marker colors\r\n  useEffect(() => {\r\n    if (markersAdded && dataNeedsGeocoding) {\r\n      renderMarkers();\r\n    }\r\n  }, [selectedLocation, renderMarkers, markersAdded, dataNeedsGeocoding]);\r\n\r\n  // Chart Options\r\n  const chartOptions = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    scales:\r\n      chartType === 'Bar'\r\n        ? {\r\n            y: {\r\n              beginAtZero: true,\r\n              min: 0.5,\r\n              max: 10,\r\n            },\r\n          }\r\n        : {},\r\n    plugins: {\r\n      legend: {\r\n        position: 'top',\r\n      },\r\n      datalabels: {\r\n        display: true,\r\n        color: '#000',\r\n        align: 'center', // Align labels to the center of the bars\r\n        anchor: 'center',\r\n        formatter: function (value, context) {\r\n          const dataset = context.chart.data.datasets[context.datasetIndex];\r\n          if (dataset.actualValues) {\r\n            const actualValue = dataset.actualValues[context.dataIndex];\r\n            return actualValue.toFixed(2); // Display actual value\r\n          } else {\r\n            return value.toFixed(2);\r\n          }\r\n        },\r\n      },\r\n      tooltip: {\r\n        callbacks: {\r\n          label: function (context) {\r\n            const dataset = context.dataset;\r\n            if (dataset.actualValues) {\r\n              const actualValue = dataset.actualValues[context.dataIndex];\r\n              return `${context.label}: ${actualValue.toFixed(2)}`;\r\n            } else {\r\n              return `${context.label}: ${context.parsed.y}`;\r\n            }\r\n          },\r\n        },\r\n      },\r\n    },\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      {/* Map Container */}\r\n      <div id=\"map\" style={styles.map}></div>\r\n\r\n      {/* Sidebar */}\r\n      <div style={styles.sidebar}>\r\n        {/* Combined Controls Box */}\r\n        <div style={styles.combinedBox}>\r\n          {/* Progress Indicators */}\r\n          <div style={styles.progressContainer}>\r\n            <div style={styles.progressItem}>\r\n              <CircularProgressbar\r\n                value={progress.upload}\r\n                text={`${Math.round(progress.upload)}%`}\r\n                styles={{\r\n                  root: { width: '80px' },\r\n                  text: { fontSize: '10px' },\r\n                }}\r\n              />\r\n              <div style={styles.progressMessage}>{progressMessages.upload}</div>\r\n            </div>\r\n            <div style={styles.progressItem}>\r\n              <CircularProgressbar\r\n                value={progress.preprocess}\r\n                text={`${Math.round(progress.preprocess)}%`}\r\n                styles={{\r\n                  root: { width: '80px' },\r\n                  text: { fontSize: '10px' },\r\n                }}\r\n              />\r\n              <div style={styles.progressMessage}>{progressMessages.preprocess}</div>\r\n            </div>\r\n            <div style={styles.progressItem}>\r\n              <CircularProgressbar\r\n                value={progress.geocode}\r\n                text={`${Math.round(progress.geocode)}%`}\r\n                styles={{\r\n                  root: { width: '80px' },\r\n                  text: { fontSize: '10px' },\r\n                }}\r\n              />\r\n              <div style={styles.progressMessage}>{progressMessages.geocode}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Upload Data Section */}\r\n          <div style={styles.section}>\r\n            <h3 style={styles.sectionTitle}>Upload Data</h3>\r\n            <input\r\n              type=\"file\"\r\n              accept=\".json, .csv\"\r\n              onChange={handleFileUpload}\r\n              style={styles.fileInput}\r\n            />\r\n          </div>\r\n\r\n          {/* Mark Locations Button */}\r\n          {geoData.length > 0 && !markersAdded && dataNeedsGeocoding && (\r\n            <div style={styles.section}>\r\n              <button\r\n                onClick={renderMarkers}\r\n                style={{\r\n                  ...styles.chartButton,\r\n                  backgroundColor: '#17a2b8',\r\n                  width: '100%',\r\n                }}\r\n              >\r\n                Mark Locations on Map\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          {/* Dataset Details Section */}\r\n          <div style={styles.section}>\r\n            <h3 style={styles.sectionTitle}>Dataset Details</h3>\r\n            {geoData.length > 0 ? (\r\n              <div style={styles.datasetDetails}>\r\n                <p>\r\n                  <strong>Rows:</strong> {totalRows}\r\n                </p>\r\n                <p>\r\n                  <strong>Columns:</strong> {totalColumns}\r\n                </p>\r\n                <p>\r\n                  <strong>Numeric Columns:</strong> {numericHeaders.join(', ')}\r\n                </p>\r\n                <p>\r\n                  <strong>String Columns:</strong> {stringHeaders.join(', ')}\r\n                </p>\r\n              </div>\r\n            ) : (\r\n              <p>No dataset uploaded yet.</p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Location Comparison Section */}\r\n          <div style={styles.section}>\r\n            <h3 style={styles.sectionTitle}>Compare Two States</h3>\r\n            <div style={styles.inputGroup}>\r\n              <label style={styles.inputLabel}>State 1:</label>\r\n              <select\r\n                value={selectedState1}\r\n                onChange={(e) => setSelectedState1(e.target.value)}\r\n                style={styles.selectDropdown}\r\n                disabled={stateList.length === 0}\r\n              >\r\n                <option value=\"\">Select State</option>\r\n                {stateList.map((state) => (\r\n                  <option key={state} value={state}>\r\n                    {state}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <div style={styles.inputGroup}>\r\n              <label style={styles.inputLabel}>State 2:</label>\r\n              <select\r\n                value={selectedState2}\r\n                onChange={(e) => setSelectedState2(e.target.value)}\r\n                style={styles.selectDropdown}\r\n                disabled={stateList.length === 0}\r\n              >\r\n                <option value=\"\">Select State</option>\r\n                {stateList.map((state) => (\r\n                  <option key={state} value={state}>\r\n                    {state}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <button\r\n              onClick={handleStateSelection}\r\n              disabled={!selectedState1 || !selectedState2}\r\n              style={{\r\n                ...styles.chartButton,\r\n                backgroundColor:\r\n                  selectedState1 && selectedState2 ? '#28a745' : '#6c757d',\r\n              }}\r\n            >\r\n              Compare\r\n            </button>\r\n\r\n            {/* New Mark on Map Button */}\r\n            {compareMarkersEnabled && (\r\n              <div style={{ marginTop: '10px' }}>\r\n                <button\r\n                  onClick={renderSelectedMarkers}\r\n                  style={{\r\n                    ...styles.chartButton,\r\n                    backgroundColor: '#17a2b8',\r\n                    width: '100%',\r\n                  }}\r\n                >\r\n                  Mark on Map\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Chart Type Selection Section */}\r\n          <div style={styles.section}>\r\n            <h3 style={styles.sectionTitle}>Select Chart Type</h3>\r\n            <div style={styles.chartOptions}>\r\n              <button\r\n                onClick={() => setChartType('Bar')}\r\n                style={{\r\n                  ...styles.chartButton,\r\n                  ...(chartType === 'Bar' ? styles.chartButtonActive : {}),\r\n                }}\r\n              >\r\n                Bar Chart\r\n              </button>\r\n              <button\r\n                onClick={() => setChartType('Pie')}\r\n                style={{\r\n                  ...styles.chartButton,\r\n                  ...(chartType === 'Pie' ? styles.chartButtonActive : {}),\r\n                }}\r\n              >\r\n                Pie Chart\r\n              </button>\r\n              <button\r\n                onClick={() => setChartType('Doughnut')}\r\n                style={{\r\n                  ...styles.chartButton,\r\n                  ...(chartType === 'Doughnut' ? styles.chartButtonActive : {}),\r\n                }}\r\n              >\r\n                Doughnut Chart\r\n              </button>\r\n              <button\r\n                onClick={() => setChartType('PolarArea')}\r\n                style={{\r\n                  ...styles.chartButton,\r\n                  ...(chartType === 'PolarArea' ? styles.chartButtonActive : {}),\r\n                }}\r\n              >\r\n                PolarArea Chart\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Chart Display Section */}\r\n        {chartData && (\r\n          <div style={styles.chartContainer}>\r\n            <div style={styles.chartWrapper}>\r\n              <div style={styles.chartContent}>\r\n                <h3>{chartType} Chart</h3>\r\n                {chartType === 'Bar' && <Bar data={chartData} options={chartOptions} />}\r\n                {chartType === 'Pie' && <Pie data={chartData} options={chartOptions} />}\r\n                {chartType === 'Doughnut' && (\r\n                  <Doughnut data={chartData} options={chartOptions} />\r\n                )}\r\n                {chartType === 'PolarArea' && (\r\n                  <PolarArea data={chartData} options={chartOptions} />\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MapView;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}